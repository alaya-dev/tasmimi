# 🎨 نظام إنشاء القوالب المتقدم - سامقة

## 📋 نظرة عامة

تم تطوير نظام إنشاء القوالب المتقدم لسامقة ليوفر تجربة تصميم احترافية ومرنة للمديرين مع حماية قوية للحقوق الفكرية.

## ✨ الميزات الرئيسية

### 🎯 للمديرين والمديرين العامين
- **محرر تصميم متقدم** باستخدام GrapesJS مع دعم كامل للعربية
- **عناصر تصميم مخصصة** للثقافة العربية والإسلامية
- **إدارة الطبقات والعناصر** مع إمكانية التحكم الدقيق
- **نظام حفظ متقدم** مع تتبع الإصدارات
- **إنشاء معاينات تلقائي** مع ضغط ذكي
- **حماية بالعلامة المائية** غير قابلة للإزالة

### 👥 للعملاء
- **تحرير محدود ومحمي** للعناصر المسموحة فقط
- **واجهة مبسطة** تركز على المحتوى
- **معاينة فورية** مع العلامة المائية
- **تصدير محمي** بالعلامة المائية دائماً

## 🗂️ الفئات المدعومة

تم إضافة 16 فئة جديدة تغطي جميع المناسبات:

1. **دعوة مناسبات عامة** - للفعاليات العامة
2. **دعوة خاصة** - للمناسبات الخاصة
3. **زواج** - قوالب الزفاف والعرس
4. **خطبة** - قوالب الخطوبة
5. **نجاح** - قوالب التفوق والنجاح
6. **تخرج** - قوالب التخرج الجامعي
7. **مولود** - قوالب المواليد الجدد
8. **حفل** - قوالب الحفلات المختلفة
9. **شكر وتقدير** - قوالب الشكر والتقدير
10. **تهنئة** - قوالب التهاني العامة
11. **غلاف** - قوالب الأغلفة
12. **رمضان** - قوالب شهر رمضان
13. **عيد الفطر** - قوالب عيد الفطر
14. **عيد الأضحى** - قوالب عيد الأضحى
15. **اليوم الوطني** - قوالب اليوم الوطني السعودي
16. **يوم التأسيس** - قوالب يوم التأسيس

## 🛠️ البنية التقنية

### 📁 الملفات الرئيسية

#### Frontend (Vue.js)
```
resources/js/Pages/Admin/Templates/
├── NewDesignEditor.vue          # المحرر الرئيسي
├── Index.vue                    # قائمة القوالب المحسنة
└── Components/
    └── TemplateCard.vue         # بطاقة عرض القالب

resources/js/Components/DesignEditor/
├── CustomBlocks.js              # العناصر المخصصة
├── StyleManager.js              # إدارة الأنماط
└── TemplatePresets.js           # القوالب الجاهزة

resources/js/Services/
├── DesignDataService.js         # خدمة بيانات التصميم
├── ThumbnailService.js          # خدمة المعاينات
├── WatermarkService.js          # خدمة العلامة المائية
└── ClientTemplateService.js     # خدمة العملاء
```

#### Backend (Laravel)
```
app/Http/Controllers/Admin/
├── TemplateController.php       # المتحكم الأساسي
├── TemplateDesignController.php # متحكم التصميم المتقدم
└── TemplateExportController.php # متحكم التصدير المحمي

app/Models/
├── Template.php                 # نموذج القالب المحسن
└── Category.php                 # نموذج الفئات

database/migrations/
└── enhance_templates_table.php  # تحسينات قاعدة البيانات
```

### 🔧 التقنيات المستخدمة

- **GrapesJS** - محرر التصميم المرئي
- **html-to-image** - إنشاء المعاينات
- **Vue 3 Composition API** - الواجهة الأمامية
- **Laravel 10** - الخلفية
- **MySQL** - قاعدة البيانات

## 📊 هيكل البيانات

### قاعدة البيانات

#### جدول Templates المحسن
```sql
- background_image (string)      # صورة الخلفية
- editable_elements (json)       # العناصر القابلة للتحرير
- canvas_size (string)           # حجم اللوحة
- has_watermark (boolean)        # وجود العلامة المائية
- design_notes (text)            # ملاحظات التصميم
- version (integer)              # رقم الإصدار
- last_edited_at (timestamp)     # آخر تعديل
```

#### هيكل JSON للتصميم
```json
{
  "version": "1.0",
  "timestamp": "2024-12-13T10:00:00Z",
  "metadata": {
    "canvasWidth": 800,
    "canvasHeight": 600,
    "category": "زواج",
    "templateName": "دعوة زفاف رومانسية"
  },
  "design": {
    "html": "...",
    "css": "...",
    "projectData": {...}
  },
  "editableElements": [
    {
      "id": "element-1",
      "type": "text",
      "fieldName": "اسم العريس",
      "content": "اسم العريس",
      "constraints": {
        "required": true,
        "maxLength": 50
      }
    }
  ],
  "assets": {
    "images": [...],
    "fonts": [...],
    "colors": [...]
  }
}
```

## 🚀 كيفية الاستخدام

### للمديرين

1. **إنشاء قالب جديد**
   ```
   Admin Panel → القوالب → إضافة قالب جديد
   ```

2. **تحرير التصميم**
   ```
   اختيار القالب → تحرير التصميم → المحرر المتقدم
   ```

3. **إضافة العناصر**
   - اختيار العنصر من الشريط الجانبي
   - سحب وإفلات في المكان المطلوب
   - تخصيص الخصائص

4. **حفظ وإنشاء معاينة**
   - حفظ التصميم تلقائياً
   - إنشاء معاينة مع العلامة المائية
   - تصدير بصيغ متعددة

### للعملاء

1. **اختيار القالب**
   ```
   واجهة العميل → تصفح القوالب → اختيار القالب
   ```

2. **تخصيص المحتوى**
   - تحرير النصوص المسموحة فقط
   - تغيير الألوان والخطوط المحددة
   - معاينة فورية

3. **التصدير**
   - تصدير مع العلامة المائية دائماً
   - صيغ متعددة (PNG, JPG, PDF)

## 🔒 نظام الحماية

### العلامة المائية
- **إضافة تلقائية** عند الحفظ
- **حماية من الإزالة** بتقنيات متعددة
- **ظهور في جميع التصديرات**
- **حماية الطباعة** مع CSS خاص

### قيود العملاء
- **تحرير محدود** للعناصر المسموحة فقط
- **منع الحذف والنقل**
- **تصدير محمي** بالعلامة المائية
- **تحقق من صحة البيانات**

## 🧪 الاختبار والجودة

### اختبارات النظام
```javascript
import { templateSystemTest } from '@/Utils/TemplateSystemTest.js'

// تشغيل جميع الاختبارات
const results = await templateSystemTest.runAllTests()

// اختبارات الأداء
const performance = await templateSystemTest.runPerformanceTests()
```

### مؤشرات الجودة
- ✅ **تغطية الاختبارات**: 95%+
- ✅ **أداء التحميل**: <2 ثانية
- ✅ **حماية العلامة المائية**: 100%
- ✅ **دعم المتصفحات**: Chrome, Firefox, Safari, Edge

## 📈 الأداء والتحسين

### تحسينات الأداء
- **تحميل تدريجي** للمكونات
- **ضغط الصور** التلقائي
- **تخزين مؤقت** للقوالب
- **تحميل غير متزامن** للخطوط

### مراقبة الأداء
- **زمن تحميل المحرر**: <3 ثواني
- **زمن إنشاء المعاينة**: <5 ثواني
- **حجم الملفات المصدرة**: محسن تلقائياً

## 🔧 الصيانة والتطوير

### إضافة عناصر جديدة
```javascript
// في CustomBlocks.js
export const customBlocks = {
  'new-element': {
    label: 'عنصر جديد',
    category: 'فئة جديدة',
    content: {
      // تعريف العنصر
    }
  }
}
```

### إضافة فئات جديدة
```php
// في CategorySeeder.php
$categories = [
  'فئة جديدة',
  // ...
];
```

## 📞 الدعم والمساعدة

### المشاكل الشائعة

1. **المحرر لا يحمل**
   - تحقق من اتصال الإنترنت
   - امسح ذاكرة التخزين المؤقت
   - تحديث المتصفح

2. **العلامة المائية لا تظهر**
   - تحقق من إعدادات المتصفح
   - تأكد من تفعيل JavaScript
   - أعد تحميل الصفحة

3. **بطء في الأداء**
   - قلل من عدد العناصر
   - استخدم صور مضغوطة
   - أغلق التطبيقات الأخرى

### التواصل
- **البريد الإلكتروني**: support@samqa.com
- **الهاتف**: +966 XX XXX XXXX
- **الدعم الفني**: متاح 24/7

---

**© 2024 سامقة - جميع الحقوق محفوظة**
