import{r as n,c as r,o as l,a as f,u as N,Z as W,w as k,b as e,d as m,i as L,e as b,t as d,F as H,f as Y,j as T,bR as P,v as q,h as K,k as ee,L as O,N as z,s as te}from"./app-BJSEvLr2.js";import{_ as oe}from"./ClientLayout-BKigkkjX.js";import"./DropdownLink-BKuK1C9h.js";import"./useTranslations-CytgtFYN.js";const se={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},re={class:"mb-8"},le={class:"flex items-center justify-between"},ne={class:"flex items-center space-x-4 space-x-reverse"},ae={key:0,class:"mb-6 bg-green-50 border border-green-200 text-green-800 px-4 py-3 rounded-xl flex items-center"},ie={key:1,class:"mb-6 bg-red-50 border border-red-200 text-red-800 px-4 py-3 rounded-xl flex items-center"},de={key:2,class:"text-center py-16"},ue={class:"max-w-md mx-auto"},ce={key:3,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6"},pe={class:"relative aspect-[4/3] bg-gradient-to-br from-gray-50 to-gray-100 overflow-hidden"},ve=["src","alt"],me={key:1,class:"w-full h-full flex items-center justify-center"},fe={class:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-40 transition-all duration-300 flex items-center justify-center opacity-0 group-hover:opacity-100"},ge={class:"flex space-x-2 space-x-reverse"},xe=["onClick"],he={class:"p-4"},ye={class:"mb-2"},ke=["onBlur","onKeyup"],be=["onClick"],we={class:"flex items-center justify-between text-sm text-gray-500 mb-3"},_e={class:"flex items-center justify-between text-xs text-gray-400"},Ce={class:"px-4 pb-4 flex space-x-2 space-x-reverse"},Me=["onClick"],je=["onClick"],Se={class:"space-y-4"},Ee={key:0},Be={class:"text-center text-sm text-gray-600"},De={class:"flex space-x-3 space-x-reverse mt-6"},Ne=["disabled"],Te={key:0},ze={key:1},$e={class:"text-gray-600 mb-6"},Ve={class:"flex space-x-3 space-x-reverse"},Fe=["disabled"],Le={key:0},He={key:1},Pe={key:0,class:"fixed top-4 right-4 z-50"},qe={class:"bg-white rounded-lg shadow-xl border-l-4 border-green-500 p-4 max-w-sm"},Ke={class:"flex items-center"},Oe={class:"mr-3"},Ae={class:"text-sm font-medium text-gray-900"},Re={class:"mr-auto pl-3"},Ge={key:0,class:"fixed top-4 right-4 z-50"},Ie={class:"bg-white rounded-lg shadow-xl border-l-4 border-red-500 p-4 max-w-sm"},Ue={class:"flex items-center"},Je={class:"mr-3"},Xe={class:"text-sm font-medium text-gray-900"},Qe={class:"mr-auto pl-3"},tt={__name:"MyDesigns",props:{designs:{type:Array,default:()=>[]}},setup($){const V=n(!1),j=n(!1),u=n(null),g=n("png"),x=n(90),w=n(!1),h=n(!1),S=n(null),c=n(""),A=n(null),_=n(!1),C=n(!1),M=n(""),R=o=>{z.visit(route("client.designs.edit",o.id))},G=async o=>{var t;try{console.log("🔄 Cloning design:",o.name);const p=(t=document.querySelector('meta[name="csrf-token"]'))==null?void 0:t.getAttribute("content");if(!p)throw new Error("CSRF token not found");const a=await fetch(route("client.designs.duplicate",o.id),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":p,Accept:"application/json"}});if(a.ok){const i=await a.json();console.log("✅ Design cloned successfully:",i),i.success?(I("تم استنساخ التصميم بنجاح!"),setTimeout(()=>{window.location.reload()},1500)):E(i.message||"خطأ في استنساخ التصميم")}else{const i=await a.json().catch(()=>null);console.error("❌ Clone request failed:",a.status,{status:a.status,statusText:a.statusText,errorData:i});const s=(i==null?void 0:i.message)||`خطأ ${a.status}: ${a.statusText}`;E(s)}}catch(p){console.error("Error cloning design:",p),E("خطأ في استنساخ التصميم")}},I=o=>{M.value=o,_.value=!0,setTimeout(()=>{_.value=!1},3e3)},E=o=>{M.value=o,C.value=!0,setTimeout(()=>{C.value=!1},3e3)},B=()=>{V.value=!1,u.value=null,g.value="png",x.value=90},U=async()=>{if(u.value){w.value=!0;try{const t=await(await fetch(route("client.designs.export",u.value.id),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').content},body:JSON.stringify({format:g.value,quality:x.value})})).json();t.success?(console.log("Export successful:",t.export_data),B()):showNotification("حدث خطأ أثناء التصدير: "+t.message,"error")}catch(o){console.error("Export error:",o),showNotification("حدث خطأ أثناء التصدير","error")}finally{w.value=!1}}},J=o=>{u.value=o,j.value=!0},D=()=>{j.value=!1,u.value=null},X=async()=>{if(u.value){h.value=!0;try{await z.delete(route("client.designs.destroy",u.value.id),{preserveState:!0,preserveScroll:!0,onSuccess:()=>{D()},onError:()=>{showNotification("حدث خطأ أثناء حذف التصميم","error")},onFinish:()=>{h.value=!1}})}catch(o){console.error("Error deleting design:",o),alert("حدث خطأ أثناء حذف التصميم"),h.value=!1}}},Q=async o=>{S.value=o.id,c.value=o.name,await te();const t=document.querySelector('input[ref="nameInput"]');t&&(t.focus(),t.select())},y=()=>{S.value=null,c.value=""},F=async o=>{if(!c.value.trim()){y();return}try{await z.patch(route("client.designs.update-name",o.id),{name:c.value.trim()},{preserveState:!0,preserveScroll:!0,onSuccess:()=>{o.name=c.value.trim(),y()},onError:()=>{alert("حدث خطأ أثناء تحديث اسم التصميم"),y()}})}catch(t){console.error("Error updating design name:",t),alert("حدث خطأ أثناء تحديث اسم التصميم"),y()}},Z=o=>o?new Date(o).toLocaleDateString("ar",{year:"numeric",month:"long",day:"numeric",calendar:"gregory"}):"";return(o,t)=>(l(),r(H,null,[f(N(W),{title:"تصاميمي - سامقة"}),f(oe,null,{default:k(()=>{var p,a,i;return[e("div",se,[e("div",re,[e("div",le,[t[8]||(t[8]=e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900 mb-2"},"تصاميمي"),e("p",{class:"text-gray-600"},"إدارة وتحرير تصاميمك الشخصية")],-1)),e("div",ne,[f(N(L),{href:o.route("client.home"),class:"bg-gradient-to-r from-purple-500 to-pink-500 text-white px-6 py-3 rounded-xl font-semibold hover:from-purple-600 hover:to-pink-600 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105"},{default:k(()=>t[7]||(t[7]=[e("svg",{class:"w-5 h-5 inline-block ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),b(" إنشاء تصميم جديد ")])),_:1,__:[7]},8,["href"])])])]),(p=o.$page.props.flash)!=null&&p.success?(l(),r("div",ae,[t[9]||(t[9]=e("svg",{class:"w-5 h-5 ml-2 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),b(" "+d(o.$page.props.flash.success),1)])):m("",!0),(a=o.$page.props.flash)!=null&&a.error?(l(),r("div",ie,[t[10]||(t[10]=e("svg",{class:"w-5 h-5 ml-2 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),b(" "+d(o.$page.props.flash.error),1)])):m("",!0),$.designs.length===0?(l(),r("div",de,[e("div",ue,[t[12]||(t[12]=e("div",{class:"w-24 h-24 mx-auto mb-6 bg-gradient-to-br from-purple-100 to-pink-100 rounded-full flex items-center justify-center"},[e("svg",{class:"w-12 h-12 text-purple-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zM21 5a2 2 0 00-2-2h-4a2 2 0 00-2 2v12a4 4 0 004 4h4a2 2 0 002-2V5z"})])],-1)),t[13]||(t[13]=e("h3",{class:"text-xl font-semibold text-gray-900 mb-3"},"ليس لديك أي تصاميم بعد",-1)),t[14]||(t[14]=e("p",{class:"text-gray-600 mb-6"},"يمكنك البدء الآن من خلال اختيار قالب وإنشاء تصميمك الأول",-1)),f(N(L),{href:o.route("client.home"),class:"inline-flex items-center bg-gradient-to-r from-purple-500 to-pink-500 text-white px-8 py-3 rounded-xl font-semibold hover:from-purple-600 hover:to-pink-600 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105"},{default:k(()=>t[11]||(t[11]=[e("svg",{class:"w-5 h-5 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),b(" اختيار قالب ")])),_:1,__:[11]},8,["href"])])])):(l(),r("div",ce,[(l(!0),r(H,null,Y($.designs,s=>(l(),r("div",{key:s.id,class:"bg-white rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 overflow-hidden group border border-gray-100"},[e("div",pe,[s.generated_image_url||s.thumbnail_url?(l(),r("img",{key:0,src:s.generated_image_url||s.thumbnail_url,alt:s.name,class:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"},null,8,ve)):(l(),r("div",me,t[15]||(t[15]=[e("svg",{class:"w-16 h-16 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zM21 5a2 2 0 00-2-2h-4a2 2 0 00-2 2v12a4 4 0 004 4h4a2 2 0 002-2V5z"})],-1)]))),e("div",fe,[e("div",ge,[e("button",{onClick:v=>R(s),class:"bg-white text-gray-900 p-3 rounded-full hover:bg-gray-100 transition-colors duration-200 shadow-lg",title:"تحرير"},t[16]||(t[16]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)]),8,xe)])])]),e("div",he,[e("div",ye,[S.value===s.id?T((l(),r("input",{key:0,"onUpdate:modelValue":t[0]||(t[0]=v=>c.value=v),onBlur:v=>F(s),onKeyup:[P(v=>F(s),["enter"]),P(y,["escape"])],class:"w-full font-semibold text-gray-900 bg-transparent border-b-2 border-purple-500 focus:outline-none focus:border-purple-600 px-1 py-1",ref_for:!0,ref_key:"nameInput",ref:A},null,40,ke)),[[q,c.value]]):(l(),r("h3",{key:1,onClick:v=>Q(s),class:"font-semibold text-gray-900 truncate cursor-pointer hover:text-purple-600 transition-colors duration-200 group/name",title:"انقر لتعديل الاسم"},[b(d(s.name)+" ",1),t[17]||(t[17]=e("svg",{class:"w-4 h-4 inline-block ml-1 opacity-0 group-hover/name:opacity-100 transition-opacity duration-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1))],8,be))]),e("div",we,[e("span",null,d(s.template.category),1),e("span",null,"الإصدار "+d(s.version),1)]),e("div",_e,[e("span",null,"آخر تعديل: "+d(Z(s.last_edited_at||s.created_at)),1),e("span",null,d(s.canvas_size),1)])]),e("div",Ce,[e("button",{onClick:v=>G(s),class:"flex-1 bg-gradient-to-r from-purple-500 to-pink-500 text-white py-2 px-4 rounded-lg font-medium hover:from-purple-600 hover:to-pink-600 transition-all duration-200"}," استنساخ ",8,Me),e("button",{onClick:v=>J(s),class:"bg-red-500 text-white p-2 rounded-lg hover:bg-red-600 transition-colors duration-200",title:"حذف"},t[18]||(t[18]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,je)])]))),128))]))]),V.value?(l(),r("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:B},[e("div",{class:"bg-white rounded-2xl p-6 max-w-md w-full mx-4",onClick:t[3]||(t[3]=K(()=>{},["stop"]))},[t[22]||(t[22]=e("h3",{class:"text-xl font-semibold mb-4"},"تصدير التصميم",-1)),e("div",Se,[e("div",null,[t[20]||(t[20]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"صيغة التصدير",-1)),T(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>g.value=s),class:"w-full border border-gray-300 rounded-lg px-3 py-2"},t[19]||(t[19]=[e("option",{value:"png"},"PNG",-1),e("option",{value:"jpeg"},"JPEG",-1),e("option",{value:"svg"},"SVG",-1),e("option",{value:"pdf"},"PDF",-1)]),512),[[ee,g.value]])]),g.value!=="svg"?(l(),r("div",Ee,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"الجودة (%)",-1)),T(e("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>x.value=s),type:"range",min:"50",max:"100",class:"w-full"},null,512),[[q,x.value]]),e("div",Be,d(x.value)+"%",1)])):m("",!0)]),e("div",De,[e("button",{onClick:U,class:"flex-1 bg-gradient-to-r from-purple-500 to-pink-500 text-white py-2 px-4 rounded-lg font-medium hover:from-purple-600 hover:to-pink-600 transition-all duration-200",disabled:w.value},[w.value?(l(),r("span",Te,"جاري التصدير...")):(l(),r("span",ze,"تصدير"))],8,Ne),e("button",{onClick:B,class:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors duration-200"}," إلغاء ")])])])):m("",!0),j.value?(l(),r("div",{key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:D},[e("div",{class:"bg-white rounded-2xl p-6 max-w-md w-full mx-4",onClick:t[4]||(t[4]=K(()=>{},["stop"]))},[t[23]||(t[23]=e("h3",{class:"text-xl font-semibold mb-4 text-red-600"},"تأكيد الحذف",-1)),e("p",$e,'هل أنت متأكد من حذف التصميم "'+d((i=u.value)==null?void 0:i.name)+'"؟ لا يمكن التراجع عن هذا الإجراء.',1),e("div",Ve,[e("button",{onClick:X,class:"flex-1 bg-red-500 text-white py-2 px-4 rounded-lg font-medium hover:bg-red-600 transition-colors duration-200",disabled:h.value},[h.value?(l(),r("span",Le,"جاري الحذف...")):(l(),r("span",He,"حذف"))],8,Fe),e("button",{onClick:D,class:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors duration-200"}," إلغاء ")])])])):m("",!0),f(O,{"enter-active-class":"transition ease-out duration-300","enter-from-class":"opacity-0 transform translate-y-2","enter-to-class":"opacity-100 transform translate-y-0","leave-active-class":"transition ease-in duration-200","leave-from-class":"opacity-100 transform translate-y-0","leave-to-class":"opacity-0 transform translate-y-2"},{default:k(()=>[_.value?(l(),r("div",Pe,[e("div",qe,[e("div",Ke,[t[25]||(t[25]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"w-6 h-6 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",Oe,[e("p",Ae,d(M.value),1)]),e("div",Re,[e("button",{onClick:t[5]||(t[5]=s=>_.value=!1),class:"text-gray-400 hover:text-gray-600"},t[24]||(t[24]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))])])])])):m("",!0)]),_:1}),f(O,{"enter-active-class":"transition ease-out duration-300","enter-from-class":"opacity-0 transform translate-y-2","enter-to-class":"opacity-100 transform translate-y-0","leave-active-class":"transition ease-in duration-200","leave-from-class":"opacity-100 transform translate-y-0","leave-to-class":"opacity-0 transform translate-y-2"},{default:k(()=>[C.value?(l(),r("div",Ge,[e("div",Ie,[e("div",Ue,[t[27]||(t[27]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"w-6 h-6 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",Je,[e("p",Xe,d(M.value),1)]),e("div",Qe,[e("button",{onClick:t[6]||(t[6]=s=>C.value=!1),class:"text-gray-400 hover:text-gray-600"},t[26]||(t[26]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))])])])])):m("",!0)]),_:1})]}),_:1})],64))}};export{tt as default};
