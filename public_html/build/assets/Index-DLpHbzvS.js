import{l as S,c as l,o as d,a as j,u as C,Z as B,w as O,b as t,j as u,v as x,F as c,f as m,t as a,k as U,d as L,n as D,g as M,i as T,N as $}from"./app-BJSEvLr2.js";import{_ as E}from"./AdminLayoutSidebar-B_xNyK73.js";import"./DropdownLink-BKuK1C9h.js";import"./useTranslations-CytgtFYN.js";const H={class:"p-6"},I={class:"bg-white rounded-lg shadow mb-6"},z={class:"p-6"},A={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},G=["value"],Z={class:"bg-white rounded-lg shadow"},q={class:"overflow-x-auto"},J={class:"min-w-full divide-y divide-gray-200"},K={class:"bg-white divide-y divide-gray-200"},P={class:"px-6 py-4 whitespace-nowrap"},Q={class:"flex items-center"},R={class:"text-right"},W={class:"text-sm font-medium text-gray-900"},X={class:"text-sm text-gray-500"},Y={class:"px-6 py-4 whitespace-nowrap text-right"},tt={class:"text-sm text-gray-900"},et={class:"px-6 py-4 whitespace-nowrap text-right"},st={class:"text-sm font-medium text-gray-900"},rt={class:"px-6 py-4 whitespace-nowrap text-right"},at={class:"px-6 py-4 whitespace-nowrap text-right text-sm text-gray-900"},ot={class:"px-6 py-4 whitespace-nowrap text-right text-sm text-gray-900"},it={key:0,class:"px-6 py-4 border-t border-gray-200"},dt={class:"flex items-center justify-between"},lt={class:"text-sm text-gray-700"},nt={class:"flex space-x-1 space-x-reverse"},mt={__name:"Index",props:{purchases:Object,stats:Object,topTemplates:Array,filters:Object,statuses:Object},setup(o){var b,f,h,v;const g=o,r=S({search:((b=g.filters)==null?void 0:b.search)||"",status:((f=g.filters)==null?void 0:f.status)||"",date_from:((h=g.filters)==null?void 0:h.date_from)||"",date_to:((v=g.filters)==null?void 0:v.date_to)||""}),p=i=>new Date(i).toLocaleDateString("en-GB",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}).replace(/(\d{2})\/(\d{2})\/(\d{4})/,"$3-$2-$1"),F=i=>new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}).format(i)+" ر.س.",V=i=>({paid:"bg-green-100 text-green-800",pending:"bg-yellow-100 text-yellow-800",failed:"bg-red-100 text-red-800",refunded:"bg-gray-100 text-gray-800"})[i]||"bg-gray-100 text-gray-800",y=()=>{$.get(route("admin.template-sales.index"),r,{preserveState:!0,replace:!0})},N=()=>{Object.keys(r).forEach(i=>{r[i]=""}),y()};return(i,e)=>(d(),l(c,null,[j(C(B),{title:"القوالب المباعة"}),j(E,null,{default:O(()=>[t("div",H,[e[12]||(e[12]=t("div",{class:"flex justify-between items-center mb-6"},[t("div",null,[t("h1",{class:"text-2xl font-bold text-gray-900"},"القوالب المباعة"),t("p",{class:"text-gray-600 mt-1"},"إحصائيات ومبيعات القوالب")])],-1)),t("div",I,[e[9]||(e[9]=t("div",{class:"px-6 py-4 border-b border-gray-200"},[t("h2",{class:"text-lg font-semibold text-gray-900"},"تصفية البيانات")],-1)),t("div",z,[t("div",A,[t("div",null,[e[4]||(e[4]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2 text-right"},"البحث",-1)),u(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>r.search=s),type:"text",placeholder:"اسم القالب أو البريد الإلكتروني",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 text-right"},null,512),[[x,r.search]])]),t("div",null,[e[6]||(e[6]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2 text-right"},"الحالة",-1)),u(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>r.status=s),class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 text-right"},[e[5]||(e[5]=t("option",{value:""},"جميع الحالات",-1)),(d(!0),l(c,null,m(o.statuses,(s,n)=>(d(),l("option",{key:n,value:n},a(s),9,G))),128))],512),[[U,r.status]])]),t("div",null,[e[7]||(e[7]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2 text-right"},"من تاريخ",-1)),u(t("input",{"onUpdate:modelValue":e[2]||(e[2]=s=>r.date_from=s),type:"date",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[x,r.date_from]])]),t("div",null,[e[8]||(e[8]=t("label",{class:"block text-sm font-medium text-gray-700 mb-2 text-right"},"إلى تاريخ",-1)),u(t("input",{"onUpdate:modelValue":e[3]||(e[3]=s=>r.date_to=s),type:"date",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[x,r.date_to]])])]),t("div",{class:"flex justify-end mt-4 space-x-3 space-x-reverse"},[t("button",{onClick:N,class:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50"}," مسح الفلاتر "),t("button",{onClick:y,class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700"}," تطبيق الفلاتر ")])])]),t("div",Z,[e[11]||(e[11]=t("div",{class:"px-6 py-4 border-b border-gray-200"},[t("h2",{class:"text-lg font-semibold text-gray-900"},"قائمة المشتريات")],-1)),t("div",q,[t("table",J,[e[10]||(e[10]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"}," القالب "),t("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"}," المشتري "),t("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"}," المبلغ "),t("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"}," الحالة "),t("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"}," تاريخ الشراء "),t("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"}," تاريخ الدفع ")])],-1)),t("tbody",K,[(d(!0),l(c,null,m(o.purchases.data,s=>{var n,w,_,k;return d(),l("tr",{key:s.id,class:"hover:bg-gray-50"},[t("td",P,[t("div",Q,[t("div",R,[t("div",W,a(((n=s.template)==null?void 0:n.name)||"قالب محذوف"),1),t("div",X,a(((_=(w=s.template)==null?void 0:w.category)==null?void 0:_.name)||"غير محدد"),1)])])]),t("td",Y,[t("div",tt,a(((k=s.user)==null?void 0:k.email)||"مستخدم محذوف"),1)]),t("td",et,[t("div",st,a(F(s.amount)),1)]),t("td",rt,[t("span",{class:D([V(s.status),"px-2 py-1 text-xs font-semibold rounded-full"])},a(o.statuses[s.status]||s.status),3)]),t("td",at,a(p(s.created_at)),1),t("td",ot,a(s.paid_at?p(s.paid_at):"غير مدفوع"),1)])}),128))])])]),o.purchases.links?(d(),l("div",it,[t("div",dt,[t("div",lt," عرض "+a(o.purchases.from)+" إلى "+a(o.purchases.to)+" من "+a(o.purchases.total)+" نتيجة ",1),t("div",nt,[(d(!0),l(c,null,m(o.purchases.links,s=>(d(),M(C(T),{key:s.label,href:s.url,innerHTML:s.label,class:D(["px-3 py-2 text-sm border rounded",s.active?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"]),disabled:!s.url},null,8,["href","innerHTML","class","disabled"]))),128))])])])):L("",!0)])])]),_:1})],64))}};export{mt as default};
