import{r as b,T as U,c as n,o as d,a as _,u as o,Z as I,w as p,b as t,d as u,F as c,f as w,t as l,n as S,h as O,j as x,v as g,k as Z,e as k,x as B}from"./app-BJSEvLr2.js";import{_ as G}from"./AdminLayoutSidebar-B_xNyK73.js";import{_ as D}from"./Modal-BAMdrlUW.js";import"./DropdownLink-BKuK1C9h.js";import"./useTranslations-CytgtFYN.js";const J={class:"py-12",dir:"rtl"},K={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},P={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg"},Q={class:"p-6"},R={class:"overflow-x-auto"},W={class:"min-w-full divide-y divide-gray-200"},X={class:"bg-white divide-y divide-gray-200"},Y={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 text-right"},tt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 text-right"},et={class:"flex flex-col"},st={key:0,class:"text-xs text-gray-400 mt-1"},rt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 text-right"},ot={class:"flex flex-col"},it={class:"font-medium"},nt={key:0,class:"text-xs text-orange-600 font-medium"},dt={class:"px-6 py-4 text-sm text-gray-500 text-right"},lt={key:0,class:"space-y-1"},at={key:0,class:"text-xs text-gray-400"},ut={key:1,class:"text-xs text-gray-400"},xt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 text-right"},gt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 text-right"},mt={class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800"},pt={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-right"},ct={class:"flex items-center gap-2 justify-end"},ft=["onClick"],yt=["onClick"],ht={key:0},vt={class:"p-6",dir:"rtl"},bt={class:"text-lg font-medium text-gray-900 text-right mb-4"},_t={key:0,class:"mt-2 text-sm text-red-600 text-right"},wt=["value"],kt={key:0,class:"mt-2 text-sm text-red-600 text-right"},Ct={key:0},Mt={key:0,class:"mt-2 text-sm text-red-600 text-right"},Vt={key:0,class:"mt-2 text-sm text-red-600 text-right"},jt={key:0,class:"mt-2 text-sm text-red-600 text-right"},Ut={class:"space-y-2"},St=["onUpdate:modelValue"],Bt=["onClick"],Dt={class:"space-y-3"},Et={class:"flex items-center justify-end"},Ft={for:"is_active",class:"flex items-center"},Ht={class:"flex items-center justify-end"},Tt={for:"is_popular",class:"flex items-center"},$t={class:"flex justify-end space-x-3 space-x-reverse pt-4"},At=["disabled"],Lt={key:0,class:"animate-spin h-4 w-4 mr-2 border-2 border-white border-t-transparent rounded-full"},Nt={class:"p-6",dir:"rtl"},qt={class:"mt-1 text-sm text-gray-600 text-right"},zt={class:"mt-6 flex justify-end space-x-3 space-x-reverse"},It=["disabled"],Ot={key:0,class:"animate-spin h-4 w-4 mr-2 border-2 border-white border-t-transparent rounded-full"},Qt={__name:"Index",props:{subscriptions:{type:Array,default:()=>[]},types:{type:Object,default:()=>({})}},setup(f){const E=f,y=b(!1),C=b(!1),m=b(!1),h=b(null),s=U({name:"",type:"",duration_days:"",price:"",description:"",features:[],sort_order:0,is_popular:!1,color:"",is_active:!0}),M=U({}),F=i=>({annual:"bg-purple-100 text-purple-800",monthly:"bg-blue-100 text-blue-800",weekly:"bg-green-100 text-green-800",custom:"bg-orange-100 text-orange-800"})[i]||"bg-gray-100 text-gray-800",H=i=>i.duration_days?i.duration_days==7?"أسبوعي":i.duration_days==30?"شهري":i.duration_days==90?"ربع سنوي":i.duration_days==365?"سنوي":i.duration_days+" يوم":E.types[i.type]||i.type,T=()=>{s.features.push("")},$=i=>{s.features.splice(i,1)},A=()=>{m.value=!1,s.reset(),s.clearErrors(),y.value=!0},L=i=>{m.value=!0,s.reset(),s.clearErrors(),s.name=i.name,s.type=i.type,s.duration_days=i.duration_days||"",s.price=i.price,s.description=i.description||"",s.features=i.features?[...i.features]:[],s.sort_order=i.sort_order||0,s.is_popular=i.is_popular||!1,s.color=i.color||"",s.is_active=i.is_active,s.subscription_id=i.id,y.value=!0},v=()=>{y.value=!1,s.reset(),s.clearErrors()},N=()=>{m.value?s.put(route("admin.subscriptions.update",s.subscription_id),{preserveScroll:!0,onSuccess:()=>{v()}}):s.post(route("admin.subscriptions.store"),{preserveScroll:!0,onSuccess:()=>{v()}})},q=i=>{h.value=i,C.value=!0},V=()=>{C.value=!1,h.value=null},z=()=>{M.delete(route("admin.subscriptions.destroy",h.value.id),{preserveScroll:!0,onSuccess:()=>{V()}})};return(i,e)=>(d(),n(c,null,[_(o(I),{title:"إدارة الاشتراكات "}),_(G,null,{breadcrumb:p(()=>e[9]||(e[9]=[t("span",{class:"text-gray-500"},"إدارة الاشتراكات",-1)])),header:p(()=>[t("div",{class:"flex justify-between items-center flex-row-reverse"},[e[11]||(e[11]=t("div",{class:"text-right"},[t("h2",{class:"font-semibold text-xl text-gray-800 leading-tight text-right"},"إدارة الاشتراكات"),t("p",{class:"mt-1 text-sm text-gray-600 text-right"},"إدارة أسعار الاشتراكات السنوية والشهرية والأسبوعية")],-1)),t("button",{onClick:A,class:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg transition duration-200 flex items-center gap-2"},e[10]||(e[10]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),k(" إضافة اشتراك جديد ")]))])]),default:p(()=>[t("div",J,[t("div",K,[t("div",P,[e[16]||(e[16]=t("div",{class:"bg-gradient-to-r from-blue-500 to-purple-600 px-6 py-4 text-center"},[t("h3",{class:"text-lg font-semibold text-white"},"قائمة الاشتراكات"),t("p",{class:"text-blue-100 text-sm"},"إدارة جميع أنواع الاشتراكات وأسعارها")],-1)),t("div",Q,[t("div",R,[t("table",W,[e[15]||(e[15]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"}," الاسم "),t("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"}," النوع / المدة "),t("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"}," السعر "),t("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"}," الميزات "),t("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"}," الحالة "),t("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"}," الترتيب "),t("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"}," الإجراءات ")])],-1)),t("tbody",X,[(d(!0),n(c,null,w(f.subscriptions,r=>(d(),n("tr",{key:r.id,class:"hover:bg-gray-50"},[t("td",Y,l(r.name),1),t("td",tt,[t("div",et,[t("span",{class:S(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",F(r.type)])},l(H(r)),3),r.duration_days?(d(),n("span",st,l(r.duration_days)+" يوم ",1)):u("",!0)])]),t("td",rt,[t("div",ot,[t("span",it,l(r.price)+" ريال",1),r.is_popular?(d(),n("span",nt," 🔥 الأكثر شعبية ")):u("",!0)])]),t("td",dt,[r.features&&r.features.length>0?(d(),n("div",lt,[(d(!0),n(c,null,w(r.features.slice(0,2),a=>(d(),n("div",{key:a,class:"text-xs"}," • "+l(a),1))),128)),r.features.length>2?(d(),n("div",at," +"+l(r.features.length-2)+" المزيد ",1)):u("",!0)])):(d(),n("span",ut,"لا توجد ميزات محددة"))]),t("td",xt,[t("span",{class:S(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",r.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},l(r.is_active?"نشط":"غير نشط"),3)]),t("td",gt,[t("span",mt,l(r.sort_order||0),1)]),t("td",pt,[t("div",ct,[t("button",{onClick:a=>L(r),class:"text-indigo-600 hover:text-indigo-900 transition duration-200"},e[12]||(e[12]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)]),8,ft),t("button",{onClick:a=>q(r),class:"text-red-600 hover:text-red-900 transition duration-200"},e[13]||(e[13]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,yt)])])]))),128)),f.subscriptions.length===0?(d(),n("tr",ht,e[14]||(e[14]=[t("td",{colspan:"7",class:"px-6 py-4 text-center text-gray-500"}," لا توجد اشتراكات مضافة بعد ",-1)]))):u("",!0)])])])])])])]),_(D,{show:y.value,onClose:v},{default:p(()=>[t("div",vt,[t("h2",bt,l(m.value?"تعديل الاشتراك":"إضافة اشتراك جديد"),1),t("form",{onSubmit:O(N,["prevent"]),class:"space-y-4"},[t("div",null,[e[17]||(e[17]=t("label",{for:"name",class:"block text-sm font-medium text-gray-700 text-right mb-2"}," اسم الاشتراك ",-1)),x(t("input",{id:"name","onUpdate:modelValue":e[0]||(e[0]=r=>o(s).name=r),type:"text",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",style:{"text-align":"right",direction:"rtl"},required:""},null,512),[[g,o(s).name]]),o(s).errors.name?(d(),n("div",_t,l(o(s).errors.name),1)):u("",!0)]),t("div",null,[e[20]||(e[20]=t("label",{for:"type",class:"block text-sm font-medium text-gray-700 text-right mb-2"}," نوع الاشتراك ",-1)),x(t("select",{id:"type","onUpdate:modelValue":e[1]||(e[1]=r=>o(s).type=r),class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",style:{"text-align":"right",direction:"rtl"},required:""},[e[18]||(e[18]=t("option",{value:""},"اختر نوع الاشتراك",-1)),(d(!0),n(c,null,w(f.types,(r,a)=>(d(),n("option",{key:a,value:a},l(r),9,wt))),128)),e[19]||(e[19]=t("option",{value:"custom"},"مخصص",-1))],512),[[Z,o(s).type]]),o(s).errors.type?(d(),n("div",kt,l(o(s).errors.type),1)):u("",!0)]),o(s).type==="custom"?(d(),n("div",Ct,[e[21]||(e[21]=t("label",{for:"duration_days",class:"block text-sm font-medium text-gray-700 text-right mb-2"}," مدة الاشتراك (بالأيام) ",-1)),x(t("input",{id:"duration_days","onUpdate:modelValue":e[2]||(e[2]=r=>o(s).duration_days=r),type:"number",min:"1",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",style:{"text-align":"right",direction:"rtl"},placeholder:"مثال: 14 للأسبوعين، 60 للشهرين"},null,512),[[g,o(s).duration_days]]),o(s).errors.duration_days?(d(),n("div",Mt,l(o(s).errors.duration_days),1)):u("",!0),e[22]||(e[22]=t("p",{class:"mt-1 text-sm text-gray-500 text-right"}," أمثلة: 7 أيام = أسبوع، 30 يوم = شهر، 365 يوم = سنة ",-1))])):u("",!0),t("div",null,[e[23]||(e[23]=t("label",{for:"price",class:"block text-sm font-medium text-gray-700 text-right mb-2"}," السعر (ريال) ",-1)),x(t("input",{id:"price","onUpdate:modelValue":e[3]||(e[3]=r=>o(s).price=r),type:"number",step:"0.01",min:"0",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",style:{"text-align":"right",direction:"rtl"},required:""},null,512),[[g,o(s).price]]),o(s).errors.price?(d(),n("div",Vt,l(o(s).errors.price),1)):u("",!0)]),t("div",null,[e[24]||(e[24]=t("label",{for:"description",class:"block text-sm font-medium text-gray-700 text-right mb-2"}," الوصف (اختياري) ",-1)),x(t("textarea",{id:"description","onUpdate:modelValue":e[4]||(e[4]=r=>o(s).description=r),rows:"3",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",style:{"text-align":"right",direction:"rtl"}},null,512),[[g,o(s).description]]),o(s).errors.description?(d(),n("div",jt,l(o(s).errors.description),1)):u("",!0)]),t("div",null,[e[27]||(e[27]=t("label",{for:"features",class:"block text-sm font-medium text-gray-700 text-right mb-2"}," الميزات المتضمنة (اختياري) ",-1)),t("div",Ut,[(d(!0),n(c,null,w(o(s).features,(r,a)=>(d(),n("div",{key:a,class:"flex items-center gap-2"},[x(t("input",{"onUpdate:modelValue":j=>o(s).features[a]=j,type:"text",class:"flex-1 rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",style:{"text-align":"right",direction:"rtl"},placeholder:"مثال: تصاميم غير محدودة"},null,8,St),[[g,o(s).features[a]]]),t("button",{type:"button",onClick:j=>$(a),class:"text-red-600 hover:text-red-800"},e[25]||(e[25]=[t("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,Bt)]))),128)),t("button",{type:"button",onClick:T,class:"text-indigo-600 hover:text-indigo-800 text-sm flex items-center gap-1"},e[26]||(e[26]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),k(" إضافة ميزة ")]))])]),t("div",null,[e[28]||(e[28]=t("label",{for:"sort_order",class:"block text-sm font-medium text-gray-700 text-right mb-2"}," ترتيب العرض ",-1)),x(t("input",{id:"sort_order","onUpdate:modelValue":e[5]||(e[5]=r=>o(s).sort_order=r),type:"number",min:"0",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",style:{"text-align":"right",direction:"rtl"},placeholder:"0"},null,512),[[g,o(s).sort_order]]),e[29]||(e[29]=t("p",{class:"mt-1 text-sm text-gray-500 text-right"}," الرقم الأصغر يظهر أولاً ",-1))]),t("div",null,[e[30]||(e[30]=t("label",{for:"color",class:"block text-sm font-medium text-gray-700 text-right mb-2"}," لون البطاقة (اختياري) ",-1)),x(t("input",{id:"color","onUpdate:modelValue":e[6]||(e[6]=r=>o(s).color=r),type:"color",class:"w-full h-10 rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[g,o(s).color]])]),t("div",Dt,[t("div",Et,[t("label",Ft,[x(t("input",{id:"is_active","onUpdate:modelValue":e[7]||(e[7]=r=>o(s).is_active=r),type:"checkbox",class:"rounded border-gray-300 text-indigo-600 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[B,o(s).is_active]]),e[31]||(e[31]=t("span",{class:"mr-2 text-sm text-gray-700"},"نشط",-1))])]),t("div",Ht,[t("label",Tt,[x(t("input",{id:"is_popular","onUpdate:modelValue":e[8]||(e[8]=r=>o(s).is_popular=r),type:"checkbox",class:"rounded border-gray-300 text-indigo-600 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"},null,512),[[B,o(s).is_popular]]),e[32]||(e[32]=t("span",{class:"mr-2 text-sm text-gray-700"},"الأكثر شعبية",-1))])])]),t("div",$t,[t("button",{type:"button",onClick:v,class:"bg-white py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"}," إلغاء "),t("button",{type:"submit",disabled:o(s).processing,class:"inline-flex items-center px-4 py-2 bg-indigo-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-indigo-700 focus:bg-indigo-700 active:bg-indigo-900 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition ease-in-out duration-150 disabled:opacity-50"},[o(s).processing?(d(),n("div",Lt)):u("",!0),k(" "+l(m.value?"تحديث":"إضافة"),1)],8,At)])],32)])]),_:1},8,["show"]),_(D,{show:C.value,onClose:V},{default:p(()=>{var r;return[t("div",Nt,[e[34]||(e[34]=t("h2",{class:"text-lg font-medium text-gray-900 text-right"}," تأكيد حذف الاشتراك ",-1)),t("p",qt,' هل أنت متأكد من حذف اشتراك "'+l((r=h.value)==null?void 0:r.name)+'"؟ هذا الإجراء لا يمكن التراجع عنه. ',1),t("div",zt,[t("button",{onClick:V,type:"button",class:"bg-white py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"}," إلغاء "),t("button",{onClick:z,type:"button",disabled:o(M).processing,class:"inline-flex items-center justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50"},[o(M).processing?(d(),n("div",Ot)):u("",!0),e[33]||(e[33]=k(" حذف "))],8,It)])])]}),_:1},8,["show"])]),_:1})],64))}};export{Qt as default};
