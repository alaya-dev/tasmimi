import{r as c,c as i,o,a as u,u as C,Z as D,w as m,b as t,d as y,t as l,F as f,f as j,n as N,e as h,N as T}from"./app-BJSEvLr2.js";import{_ as B}from"./AdminLayoutSidebar-B_xNyK73.js";import"./DropdownLink-BKuK1C9h.js";import"./useTranslations-CytgtFYN.js";const V={class:"py-12"},$={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},z={class:"grid grid-cols-1 md:grid-cols-5 gap-6 mb-8"},E={class:"bg-white rounded-lg shadow p-6"},F={class:"flex items-center"},L={class:"mr-4 text-right"},q={class:"text-2xl font-bold text-gray-900"},A={class:"bg-white rounded-lg shadow p-6"},G={class:"flex items-center"},M={class:"mr-4 text-right"},O={class:"text-2xl font-bold text-green-600"},Z={class:"bg-white rounded-lg shadow p-6"},H={class:"flex items-center"},I={class:"mr-4 text-right"},J={class:"text-2xl font-bold text-yellow-600"},K={class:"bg-white rounded-lg shadow p-6"},P={class:"flex items-center"},Q={class:"mr-4 text-right"},R={class:"text-2xl font-bold text-red-600"},U={class:"bg-white rounded-lg shadow p-6"},W={class:"flex items-center"},X={class:"mr-4 text-right"},Y={class:"text-2xl font-bold text-gray-600"},tt={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},et={class:"p-6 text-gray-900"},st={class:"overflow-x-auto"},lt={class:"min-w-full divide-y divide-gray-200"},at={class:"bg-white divide-y divide-gray-200"},it={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 text-right"},ot={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 text-right"},dt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 text-right"},nt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 text-right"},rt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 text-right"},xt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 text-right"},ct={class:"px-6 py-4 whitespace-nowrap text-sm text-right"},gt={key:0,class:"flex justify-end"},pt=["onClick"],ut={key:1,class:"flex justify-end"},mt={key:2,class:"flex justify-end"},yt={class:"inline-flex items-center px-3 py-1 text-blue-600 bg-blue-50 rounded-md",title:"حالة غير معروفة"},ft={key:0},ht={key:0,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},vt={class:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white"},_t={class:"mt-3 text-center"},wt={class:"mt-2 px-7 py-3"},bt={class:"text-sm text-gray-500"},kt={class:"items-center px-4 py-3"},St=["disabled"],Ct={key:0},Dt={key:1},jt=["disabled"],zt={__name:"ClientSubscriptions",props:{clientSubscriptions:{type:Array,default:()=>[]},stats:{type:Object,default:()=>({})}},setup(d){const x=c(!1),r=c(null),n=c(!1),g=s=>new Date(s).toLocaleDateString("en-GB",{year:"numeric",month:"2-digit",day:"2-digit"}).split("/").reverse().join("/"),v=s=>({active:"نشط",pending:"معلق",canceled:"ملغي",expired:"منتهي"})[s]||s,_=s=>({active:"bg-green-100 text-green-800",pending:"bg-yellow-100 text-yellow-800",canceled:"bg-red-100 text-red-800",expired:"bg-gray-100 text-gray-800"})[s]||"bg-gray-100 text-gray-800",w=s=>s.duration_days?`مخصص (${s.duration_days} يوم)`:{weekly:"أسبوعي",monthly:"شهري",yearly:"سنوي"}[s.subscription_type]||s.subscription_type||"غير محدد",b=s=>{r.value=s,x.value=!0},k=()=>{x.value=!1,r.value=null,n.value=!1},S=()=>{r.value&&(n.value=!0,T.delete(route("admin.client-subscriptions.destroy",r.value.id),{onSuccess:()=>{x.value=!1,r.value=null,n.value=!1},onError:()=>{n.value=!1}}))};return(s,e)=>(o(),i(f,null,[u(C(D),{title:"اشتراكات العملاء"}),u(B,null,{header:m(()=>e[0]||(e[0]=[t("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," اشتراكات العملاء ",-1)])),default:m(()=>{var p;return[t("div",V,[t("div",$,[t("div",z,[t("div",E,[t("div",F,[e[2]||(e[2]=t("div",{class:"p-3 rounded-full bg-blue-100 text-blue-600"},[t("i",{class:"fas fa-chart-bar text-xl"})],-1)),t("div",L,[e[1]||(e[1]=t("p",{class:"text-sm font-medium text-gray-600"},"إجمالي الاشتراكات",-1)),t("p",q,l(d.stats.total),1)])])]),t("div",A,[t("div",G,[e[4]||(e[4]=t("div",{class:"p-3 rounded-full bg-green-100 text-green-600"},[t("i",{class:"fas fa-check-circle text-xl"})],-1)),t("div",M,[e[3]||(e[3]=t("p",{class:"text-sm font-medium text-gray-600"},"اشتراكات نشطة",-1)),t("p",O,l(d.stats.active),1)])])]),t("div",Z,[t("div",H,[e[6]||(e[6]=t("div",{class:"p-3 rounded-full bg-yellow-100 text-yellow-600"},[t("i",{class:"fas fa-clock text-xl"})],-1)),t("div",I,[e[5]||(e[5]=t("p",{class:"text-sm font-medium text-gray-600"},"اشتراكات معلقة",-1)),t("p",J,l(d.stats.pending),1)])])]),t("div",K,[t("div",P,[e[8]||(e[8]=t("div",{class:"p-3 rounded-full bg-red-100 text-red-600"},[t("i",{class:"fas fa-times-circle text-xl"})],-1)),t("div",Q,[e[7]||(e[7]=t("p",{class:"text-sm font-medium text-gray-600"},"اشتراكات ملغية",-1)),t("p",R,l(d.stats.canceled),1)])])]),t("div",U,[t("div",W,[e[10]||(e[10]=t("div",{class:"p-3 rounded-full bg-gray-100 text-gray-600"},[t("i",{class:"fas fa-calendar-times text-xl"})],-1)),t("div",X,[e[9]||(e[9]=t("p",{class:"text-sm font-medium text-gray-600"},"اشتراكات منتهية",-1)),t("p",Y,l(d.stats.expired),1)])])])]),t("div",tt,[t("div",et,[e[16]||(e[16]=t("div",{class:"flex justify-between items-center mb-6"},[t("h3",{class:"text-lg font-medium text-gray-900"}," قائمة اشتراكات العملاء ")],-1)),t("div",st,[t("table",lt,[e[15]||(e[15]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{scope:"col",class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"}," البريد الإلكتروني "),t("th",{scope:"col",class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"}," الاشتراك "),t("th",{scope:"col",class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"}," نوع الاشتراك "),t("th",{scope:"col",class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"}," تاريخ البداية "),t("th",{scope:"col",class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"}," تاريخ النهاية "),t("th",{scope:"col",class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"}," الحالة "),t("th",{scope:"col",class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"}," الإجراءات ")])],-1)),t("tbody",at,[(o(!0),i(f,null,j(d.clientSubscriptions,a=>(o(),i("tr",{key:a.id,class:"hover:bg-gray-50"},[t("td",it,l(a.client_email),1),t("td",ot,l(a.subscription_name),1),t("td",dt,l(w(a)),1),t("td",nt,l(g(a.starts_at)),1),t("td",rt,l(g(a.ends_at)),1),t("td",xt,[t("span",{class:N(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",_(a.status)])},l(v(a.status)),3)]),t("td",ct,[a.status==="canceled"?(o(),i("div",gt,[t("button",{onClick:Nt=>b(a),class:"inline-flex items-center px-3 py-1 text-red-600 hover:text-red-900 hover:bg-red-50 rounded-md transition-colors",title:"حذف الاشتراك"},e[11]||(e[11]=[t("i",{class:"fas fa-trash-alt ml-1"},null,-1),t("span",null,"حذف",-1)]),8,pt)])):a.status==="active"?(o(),i("div",ut,e[12]||(e[12]=[t("span",{class:"inline-flex items-center px-3 py-1 text-gray-400 bg-gray-50 rounded-md",title:"لا يمكن حذف الاشتراكات النشطة"},[t("i",{class:"fas fa-lock ml-1"})],-1)]))):(o(),i("div",mt,[t("span",yt,[e[13]||(e[13]=t("i",{class:"fas fa-question ml-1"},null,-1)),t("span",null,l(a.status),1)])]))])]))),128)),d.clientSubscriptions.length===0?(o(),i("tr",ft,e[14]||(e[14]=[t("td",{colspan:"8",class:"px-6 py-4 text-center text-gray-500"}," لا توجد اشتراكات ",-1)]))):y("",!0)])])])])])])]),x.value?(o(),i("div",ht,[t("div",vt,[t("div",_t,[e[21]||(e[21]=t("div",{class:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100"},[t("i",{class:"fas fa-exclamation-triangle text-red-600 text-xl"})],-1)),e[22]||(e[22]=t("h3",{class:"text-lg font-medium text-gray-900 mt-4"},"تأكيد الحذف",-1)),t("div",wt,[t("p",bt,[e[17]||(e[17]=h(" هل أنت متأكد من حذف اشتراك العميل: ")),t("strong",null,l((p=r.value)==null?void 0:p.client_email),1),e[18]||(e[18]=h("؟ "))]),e[19]||(e[19]=t("p",{class:"text-xs text-red-600 mt-2"}," هذا الإجراء لا يمكن التراجع عنه ",-1))]),t("div",kt,[t("button",{onClick:S,disabled:n.value,class:"px-4 py-2 bg-red-600 text-white text-base font-medium rounded-md w-24 mr-2 hover:bg-red-700 disabled:opacity-50"},[n.value?(o(),i("span",Ct,e[20]||(e[20]=[t("i",{class:"fas fa-spinner fa-spin"},null,-1)]))):(o(),i("span",Dt,"حذف"))],8,St),t("button",{onClick:k,disabled:n.value,class:"px-4 py-2 bg-gray-300 text-gray-800 text-base font-medium rounded-md w-24 hover:bg-gray-400 disabled:opacity-50"}," إلغاء ",8,jt)])])])])):y("",!0)]}),_:1})],64))}};export{zt as default};
