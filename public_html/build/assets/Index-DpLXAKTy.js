import{l as Q,r as Z,T as G,m as L,Q as N,c as n,o,a as R,u as r,Z as J,w as g,b as e,d as a,h as $,j as f,n as k,v,F as b,f as C,t as u,k as F,e as m,g as h,i as w,N as V}from"./app-BJSEvLr2.js";import{_ as K}from"./AdminLayoutSidebar-B_xNyK73.js";import{u as P}from"./useTranslations-CytgtFYN.js";import{_ as W}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./DropdownLink-BKuK1C9h.js";const X={class:"flex justify-between items-center flex-row-reverse"},Y={class:"py-12",dir:"rtl"},ee={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},te={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg mb-6"},se={class:"p-6"},re={class:"flex-1 min-w-64"},oe={class:"min-w-48"},ie=["value"],le={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg"},ne={class:"overflow-x-auto"},ae={class:"min-w-full divide-y divide-gray-200"},de={class:"bg-white divide-y divide-gray-200"},me={key:0},ue={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-right"},xe={class:"flex items-center flex-row-reverse"},ge={class:"font-medium"},pe={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 text-center"},ce={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 text-center"},fe={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-center"},ye={class:"flex justify-center space-x-2 space-x-reverse"},ve=["onClick"],be={key:0,class:"bg-white px-4 py-3 border-t border-gray-200 sm:px-6"},he={class:"flex items-center justify-between flex-row-reverse"},we={class:"flex-1 flex justify-between sm:hidden flex-row-reverse"},_e={class:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between flex-row-reverse"},ke={class:"text-sm text-gray-700 text-right"},Ce={class:"font-medium"},Ve={class:"font-medium"},ze={class:"font-medium"},je={class:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px"},Me={key:0,class:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",dir:"rtl"},Ue={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},Be={class:"inline-block align-bottom bg-white rounded-lg text-right overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"},He={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},Se={class:"sm:flex sm:items-start"},De={class:"mt-3 text-center sm:mt-0 sm:text-right w-full"},Le={key:0,class:"mt-1 text-sm text-red-600 text-right"},Ne=["value"],Re={key:0,class:"mt-1 text-sm text-red-600 text-right"},$e={key:0,class:"mt-1 text-sm text-red-600 text-right"},Fe={key:0,class:"mt-1 text-sm text-red-600 text-right"},Te={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},qe=["disabled"],Ae={key:0,class:"animate-spin h-4 w-4 ml-2",fill:"none",viewBox:"0 0 24 24"},Ie={__name:"Index",props:{users:Object,filters:Object,roles:Array},setup(d){var B,H;const p=d,{isRTL:z}=P(),x=Q({search:((B=p.filters)==null?void 0:B.search)||"",role:((H=p.filters)==null?void 0:H.role)||""}),y=Z(!1),i=G({email:"",role:"",password:"",password_confirmation:""}),j=L(()=>p.roles?p.roles.filter(l=>l!=="super_admin"):[]),M=L(()=>{var l;if((l=p.users)!=null&&l.data){const t=N().props.auth.user.role;return p.users.data.filter(c=>c.role==="super_admin"?!1:t==="admin"?c.role==="client":!0)}return[]}),T=()=>{V.get(route("admin.users.index"),x,{preserveState:!0,replace:!0})},q=()=>{x.search="",x.role="",V.get(route("admin.users.index"),{},{preserveState:!0,replace:!0})},A=l=>{confirm("هل أنت متأكد من حذف "+l.email+"؟")&&V.delete(route("admin.users.destroy",l.id))},U=()=>{i.post(route("admin.users.store"),{onSuccess:()=>{y.value=!1,i.reset()}})},I=l=>{const t=N().props.auth.user;return!(l.id===t.id||t.role==="admin"&&l.role==="admin")},_=l=>({super_admin:"مدير عام",admin:"مدير",client:"مستخدم"})[l]||l,O=l=>({super_admin:"bg-red-100 text-red-800",admin:"bg-green-100 text-green-800",client:"bg-blue-100 text-blue-800"})[l]||"bg-gray-100 text-gray-800",E=l=>new Date(l).toLocaleDateString("fr-FR",{year:"numeric",month:"2-digit",day:"2-digit"});return(l,t)=>(o(),n(b,null,[R(r(J),{title:"إدارة المستخدمين"}),R(K,null,{breadcrumb:g(()=>t[9]||(t[9]=[e("span",{class:"text-gray-500"},"إدارة المستخدمين",-1)])),header:g(()=>[e("div",X,[t[10]||(t[10]=e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"},"إدارة المستخدمين",-1)),l.$page.props.auth.user.role==="super_admin"?(o(),n("button",{key:0,onClick:t[0]||(t[0]=c=>y.value=!0),class:"bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded"}," إضافة مستخدم ")):a("",!0)])]),default:g(()=>{var c,S,D;return[e("div",Y,[e("div",ee,[e("div",te,[e("div",se,[e("form",{onSubmit:$(T,["prevent"]),class:"flex flex-wrap gap-4 flex-row-reverse"},[e("div",re,[f(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>x.search=s),type:"text",placeholder:"بحث بالبريد الإلكتروني...",class:k([r(z)?"text-right":"text-left","w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"])},null,2),[[v,x.search]])]),e("div",oe,[f(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>x.role=s),class:k([r(z)?"text-right":"text-left","w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500"])},[t[11]||(t[11]=e("option",{value:""},"جميع الأدوار",-1)),(o(!0),n(b,null,C(j.value,s=>(o(),n("option",{key:s,value:s},u(_(s)),9,ie))),128))],2),[[F,x.role]])]),t[12]||(t[12]=e("button",{type:"submit",class:"bg-gray-600 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded"}," بحث ",-1)),e("button",{type:"button",onClick:q,class:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded"}," مسح ")],32)])]),e("div",le,[t[26]||(t[26]=e("div",{class:"bg-gradient-to-r from-blue-500 to-purple-600 px-6 py-4 text-center"},[e("h3",{class:"text-lg font-semibold text-white"},"المستخدمون"),e("p",{class:"text-blue-100 text-sm"},"إدارة وتنظيم جميع المستخدمين في النظام")],-1)),e("div",ne,[e("table",ae,[t[17]||(t[17]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-4 text-xs font-semibold text-gray-600 uppercase tracking-wider text-right"},[e("div",{class:"flex items-center flex-row-reverse"},[e("svg",{class:"w-4 h-4 ml-2",fill:"currentColor",viewBox:"0 0 24 24"},[e("path",{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"})]),m(" البريد الإلكتروني ")])]),e("th",{class:"px-6 py-4 text-xs font-semibold text-gray-600 uppercase tracking-wider text-center"},[e("div",{class:"flex items-center justify-center"},[e("svg",{class:"w-4 h-4 ml-2",fill:"currentColor",viewBox:"0 0 24 24"},[e("path",{d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})]),m(" الدور ")])]),e("th",{class:"px-6 py-4 text-xs font-semibold text-gray-600 uppercase tracking-wider text-center"},[e("div",{class:"flex items-center justify-center"},[e("svg",{class:"w-4 h-4 ml-2",fill:"currentColor",viewBox:"0 0 24 24"},[e("path",{d:"M9 11H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2zm2-7h-1V2h-2v2H8V2H6v2H5c-1.1 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V9h14v11z"})]),m(" تاريخ الإنشاء ")])]),e("th",{class:"px-6 py-4 text-xs font-semibold text-gray-600 uppercase tracking-wider text-center"}," الإجراءات ")])],-1)),e("tbody",de,[((c=M.value)==null?void 0:c.length)===0?(o(),n("tr",me,t[13]||(t[13]=[e("td",{colspan:"4",class:"px-6 py-8 text-center text-gray-500"}," لا توجد مستخدمين ",-1)]))):a("",!0),(o(!0),n(b,null,C(M.value,(s,Oe)=>(o(),n("tr",{key:s.id,class:"hover:bg-gray-50 transition-colors duration-200"},[e("td",ue,[e("div",xe,[t[15]||(t[15]=e("div",{class:"w-8 h-8 bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg flex items-center justify-center ml-3"},[e("svg",{class:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 24 24"},[e("path",{d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})])],-1)),e("div",null,[e("div",ge,u(s.email),1),t[14]||(t[14]=e("div",{class:"text-xs text-gray-500"},"مستخدم في النظام",-1))])])]),e("td",pe,[e("span",{class:k([O(s.role),"inline-flex px-3 py-1 text-xs font-semibold rounded-full"])},u(_(s.role)),3)]),e("td",ce,u(E(s.created_at)),1),e("td",fe,[e("div",ye,[I(s)?(o(),n("button",{key:0,onClick:Ee=>A(s),class:"inline-flex items-center px-3 py-1 bg-red-100 text-red-700 rounded-md hover:bg-red-200 transition-colors duration-200"},t[16]||(t[16]=[e("svg",{class:"w-4 h-4 ml-1",fill:"currentColor",viewBox:"0 0 24 24"},[e("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"})],-1),m(" حذف ")]),8,ve)):a("",!0)])])]))),128))])])]),((D=(S=d.users)==null?void 0:S.data)==null?void 0:D.length)>0?(o(),n("div",be,[e("div",he,[e("div",we,[d.users.next_page_url?(o(),h(r(w),{key:0,href:d.users.next_page_url,class:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50"},{default:g(()=>t[18]||(t[18]=[m(" التالي ")])),_:1,__:[18]},8,["href"])):a("",!0),d.users.prev_page_url?(o(),h(r(w),{key:1,href:d.users.prev_page_url,class:"mr-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50"},{default:g(()=>t[19]||(t[19]=[m(" السابق ")])),_:1,__:[19]},8,["href"])):a("",!0)]),e("div",_e,[e("div",null,[e("p",ke,[t[20]||(t[20]=m(" عرض من ")),e("span",Ce,u(d.users.from),1),t[21]||(t[21]=m(" إلى ")),e("span",Ve,u(d.users.to),1),t[22]||(t[22]=m(" من أصل ")),e("span",ze,u(d.users.total),1),t[23]||(t[23]=m(" نتيجة "))])]),e("div",null,[e("nav",je,[d.users.prev_page_url?(o(),h(r(w),{key:0,href:d.users.prev_page_url,class:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50"},{default:g(()=>t[24]||(t[24]=[m(" السابق ")])),_:1,__:[24]},8,["href"])):a("",!0),d.users.next_page_url?(o(),h(r(w),{key:1,href:d.users.next_page_url,class:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50"},{default:g(()=>t[25]||(t[25]=[m(" التالي ")])),_:1,__:[25]},8,["href"])):a("",!0)])])])])])):a("",!0)])])]),y.value?(o(),n("div",Me,[e("div",Ue,[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:t[3]||(t[3]=s=>y.value=!1)}),t[35]||(t[35]=e("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"​",-1)),e("div",Be,[e("div",He,[e("div",Se,[e("div",De,[t[32]||(t[32]=e("h3",{class:"text-lg leading-6 font-medium text-gray-900 text-right mb-4",id:"modal-title"}," إضافة مستخدم جديد ",-1)),e("form",{onSubmit:$(U,["prevent"]),class:"space-y-4"},[e("div",null,[t[27]||(t[27]=e("div",{class:"mb-3",style:{"text-align":"right !important"}},[e("label",{for:"modal_email",class:"text-sm font-medium text-gray-700",style:{"text-align":"right !important",display:"block"}}," البريد الإلكتروني ")],-1)),f(e("input",{id:"modal_email","onUpdate:modelValue":t[4]||(t[4]=s=>r(i).email=s),type:"email",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",style:{"text-align":"right !important",direction:"rtl !important"},required:""},null,512),[[v,r(i).email]]),r(i).errors.email?(o(),n("div",Le,u(r(i).errors.email),1)):a("",!0)]),e("div",null,[t[29]||(t[29]=e("div",{class:"mb-3",style:{"text-align":"right !important"}},[e("label",{for:"modal_role",class:"text-sm font-medium text-gray-700",style:{"text-align":"right !important",display:"block"}}," الدور ")],-1)),f(e("select",{id:"modal_role","onUpdate:modelValue":t[5]||(t[5]=s=>r(i).role=s),class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",style:{"text-align":"right !important",direction:"rtl !important"},required:""},[t[28]||(t[28]=e("option",{value:""},"اختر الدور",-1)),(o(!0),n(b,null,C(j.value,s=>(o(),n("option",{key:s,value:s},u(_(s)),9,Ne))),128))],512),[[F,r(i).role]]),r(i).errors.role?(o(),n("div",Re,u(r(i).errors.role),1)):a("",!0)]),e("div",null,[t[30]||(t[30]=e("div",{class:"mb-3",style:{"text-align":"right !important"}},[e("label",{for:"modal_password",class:"text-sm font-medium text-gray-700",style:{"text-align":"right !important",display:"block"}}," كلمة المرور ")],-1)),f(e("input",{id:"modal_password","onUpdate:modelValue":t[6]||(t[6]=s=>r(i).password=s),type:"password",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",style:{"text-align":"right !important",direction:"rtl !important"},required:""},null,512),[[v,r(i).password]]),r(i).errors.password?(o(),n("div",$e,u(r(i).errors.password),1)):a("",!0)]),e("div",null,[t[31]||(t[31]=e("div",{class:"mb-3",style:{"text-align":"right !important"}},[e("label",{for:"modal_password_confirmation",class:"text-sm font-medium text-gray-700",style:{"text-align":"right !important",display:"block"}}," تأكيد كلمة المرور ")],-1)),f(e("input",{id:"modal_password_confirmation","onUpdate:modelValue":t[7]||(t[7]=s=>r(i).password_confirmation=s),type:"password",class:"w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",style:{"text-align":"right !important",direction:"rtl !important"},required:""},null,512),[[v,r(i).password_confirmation]]),r(i).errors.password_confirmation?(o(),n("div",Fe,u(r(i).errors.password_confirmation),1)):a("",!0)])],32)])])]),e("div",Te,[e("button",{type:"submit",onClick:U,disabled:r(i).processing,class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-indigo-600 text-base font-medium text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:ml-3 sm:w-auto sm:text-sm disabled:opacity-50"},[r(i).processing?(o(),n("svg",Ae,t[33]||(t[33]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):a("",!0),t[34]||(t[34]=m(" إضافة المستخدم "))],8,qe),e("button",{type:"button",onClick:t[8]||(t[8]=s=>y.value=!1),class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"}," إلغاء ")])])])])):a("",!0)]}),_:1})],64))}},Pe=W(Ie,[["__scopeId","data-v-141d5a48"]]);export{Pe as default};
