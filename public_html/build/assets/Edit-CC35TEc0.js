import{T as V,r as v,c as i,o as l,a as c,u as r,Z as M,w as d,b as e,h as B,d as n,j as x,n as f,v as h,t as u,F as w,f as U,k as F,x as N,i as b,e as y}from"./app-BJSEvLr2.js";import{_ as z}from"./AdminLayoutSidebar-B_xNyK73.js";import"./DropdownLink-BKuK1C9h.js";import"./useTranslations-CytgtFYN.js";const D={class:"flex justify-between items-center flex-row-reverse"},T={class:"flex items-center flex-row-reverse"},q={class:"py-12"},A={class:"max-w-4xl mx-auto sm:px-6 lg:px-8"},G={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg"},I={class:"p-6"},L={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},P={key:0,class:"mt-1 text-sm text-red-600 text-right"},S=["value"],E={key:0,class:"mt-1 text-sm text-red-600 text-right"},R={key:0},$={class:"flex justify-end mb-4"},H=["src","alt"],J={for:"thumbnail",class:"block text-sm font-medium text-gray-700 mb-2 text-right"},O={class:"flex items-center space-x-4 space-x-reverse"},Z={class:"flex-1"},K={key:0,class:"w-20 h-20"},Q=["src"],W={key:0,class:"mt-1 text-sm text-red-600 text-right"},X={key:0,class:"mt-1 text-sm text-red-600 text-right"},Y={class:"flex items-center justify-end"},ee={for:"is_active",class:"flex items-center cursor-pointer"},te={class:"flex justify-end space-x-4 space-x-reverse pt-6 border-t border-gray-200"},re=["disabled"],se={key:0,class:"animate-spin h-4 w-4 ml-2",fill:"none",viewBox:"0 0 24 24"},ne={__name:"Edit",props:{template:Object,categories:Array},setup(a){const m=a,s=V({name:m.template.name,category_id:m.template.category_id,thumbnail:null,is_active:m.template.is_active,price:m.template.price||0}),p=v(null),_=v(null),k=g=>{const t=g.target.files[0];if(t){s.thumbnail=t;const o=new FileReader;o.onload=j=>{p.value=j.target.result},o.readAsDataURL(t)}},C=()=>{s.put(route("admin.templates.update",m.template.id),{forceFormData:!0})};return(g,t)=>(l(),i(w,null,[c(r(M),{title:"تعديل القالب"}),c(z,null,{breadcrumb:d(()=>[c(r(b),{href:g.route("admin.templates.index"),class:"text-gray-500 hover:text-gray-700"},{default:d(()=>t[4]||(t[4]=[y(" إدارة القوالب ")])),_:1,__:[4]},8,["href"]),t[5]||(t[5]=e("svg",{class:"w-5 h-5 text-gray-400 mx-2 rotate-180",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule":"evenodd"})],-1)),t[6]||(t[6]=e("span",{class:"text-gray-500"},"تعديل القالب",-1))]),header:d(()=>[e("div",D,[e("div",T,[c(r(b),{href:g.route("admin.templates.index"),class:"ml-4 text-gray-600 hover:text-gray-900 transition-colors duration-200"},{default:d(()=>t[7]||(t[7]=[e("svg",{class:"w-5 h-5 rotate-180",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])),_:1,__:[7]},8,["href"]),t[8]||(t[8]=e("div",{class:"text-right"},[e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"},"تعديل القالب"),e("p",{class:"mt-1 text-sm text-gray-600"},"تحديث معلومات القالب")],-1))])])]),default:d(()=>[e("div",q,[e("div",A,[e("div",G,[t[20]||(t[20]=e("div",{class:"bg-gradient-to-r from-blue-500 to-purple-600 px-6 py-4 text-right"},[e("h3",{class:"text-lg font-semibold text-white"},"تعديل معلومات القالب"),e("p",{class:"text-blue-100 text-sm"},"تحديث تفاصيل القالب")],-1)),e("div",I,[e("form",{onSubmit:B(C,["prevent"]),class:"space-y-6"},[e("div",L,[e("div",null,[t[9]||(t[9]=e("label",{for:"name",class:"block text-sm font-medium text-gray-700 mb-2 text-right"}," اسم القالب * ",-1)),x(e("input",{id:"name","onUpdate:modelValue":t[0]||(t[0]=o=>r(s).name=o),type:"text",class:f(["w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 text-right",{"border-red-500":r(s).errors.name}]),required:""},null,2),[[h,r(s).name]]),r(s).errors.name?(l(),i("div",P,u(r(s).errors.name),1)):n("",!0)]),e("div",null,[t[11]||(t[11]=e("label",{for:"category_id",class:"block text-sm font-medium text-gray-700 mb-2 text-right"}," الفئة * ",-1)),x(e("select",{id:"category_id","onUpdate:modelValue":t[1]||(t[1]=o=>r(s).category_id=o),class:f(["w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 text-right",{"border-red-500":r(s).errors.category_id}]),required:""},[t[10]||(t[10]=e("option",{value:""},"اختر الفئة",-1)),(l(!0),i(w,null,U(a.categories,o=>(l(),i("option",{key:o.id,value:o.id},u(o.name),9,S))),128))],2),[[F,r(s).category_id]]),r(s).errors.category_id?(l(),i("div",E,u(r(s).errors.category_id),1)):n("",!0)])]),a.template.thumbnail?(l(),i("div",R,[t[12]||(t[12]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2 text-right"}," الصورة المصغرة الحالية ",-1)),e("div",$,[e("img",{src:a.template.thumbnail_url||`/storage/${a.template.thumbnail}`,alt:a.template.name,class:"w-32 h-32 object-cover rounded-lg border-2 border-gray-200"},null,8,H)])])):n("",!0),e("div",null,[e("label",J,u(a.template.thumbnail?"تغيير الصورة المصغرة":"الصورة المصغرة"),1),e("div",O,[e("div",Z,[e("input",{id:"thumbnail",ref_key:"thumbnailInput",ref:_,type:"file",accept:"image/*",onChange:k,class:f(["w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500",{"border-red-500":r(s).errors.thumbnail}])},null,34),t[13]||(t[13]=e("p",{class:"mt-1 text-sm text-gray-500 text-right"}," JPG, PNG, GIF حتى 2MB ",-1))]),p.value?(l(),i("div",K,[e("img",{src:p.value,alt:"معاينة الصورة الجديدة",class:"w-full h-full object-cover rounded-lg border-2 border-gray-200"},null,8,Q)])):n("",!0)]),r(s).errors.thumbnail?(l(),i("div",W,u(r(s).errors.thumbnail),1)):n("",!0)]),e("div",null,[t[14]||(t[14]=e("label",{for:"price",class:"block text-sm font-medium text-gray-700 mb-2 text-right"}," سعر القالب (ريال سعودي) * ",-1)),x(e("input",{id:"price","onUpdate:modelValue":t[2]||(t[2]=o=>r(s).price=o),type:"number",step:"0.01",min:"0",max:"9999.99",class:f(["w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 text-right",{"border-red-500":r(s).errors.price}]),placeholder:"0.00",required:""},null,2),[[h,r(s).price]]),t[15]||(t[15]=e("p",{class:"mt-1 text-sm text-gray-500 text-right"}," أدخل سعر القالب بالريال السعودي (0 للمجاني) ",-1)),r(s).errors.price?(l(),i("div",X,u(r(s).errors.price),1)):n("",!0)]),e("div",Y,[e("label",ee,[x(e("input",{id:"is_active","onUpdate:modelValue":t[3]||(t[3]=o=>r(s).is_active=o),type:"checkbox",class:"rounded border-gray-300 text-indigo-600 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50"},null,512),[[N,r(s).is_active]]),t[16]||(t[16]=e("span",{class:"mr-2 text-sm text-gray-700"},"تفعيل القالب",-1))])]),e("div",te,[c(r(b),{href:g.route("admin.templates.index"),class:"inline-flex items-center px-4 py-2 bg-gray-300 border border-transparent rounded-md font-semibold text-xs text-gray-700 uppercase tracking-widest hover:bg-gray-400 focus:bg-gray-400 active:bg-gray-500 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition ease-in-out duration-150"},{default:d(()=>t[17]||(t[17]=[y(" إلغاء ")])),_:1,__:[17]},8,["href"]),e("button",{type:"submit",disabled:r(s).processing,class:"inline-flex items-center px-4 py-2 bg-indigo-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-indigo-700 focus:bg-indigo-700 active:bg-indigo-900 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition ease-in-out duration-150 disabled:opacity-50"},[r(s).processing?(l(),i("svg",se,t[18]||(t[18]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):n("",!0),t[19]||(t[19]=y(" تحديث القالب "))],8,re)])],32)])])])])]),_:1})],64))}};export{ne as default};
