import{r as x,T as k,g as w,o,w as g,a as b,b as e,u as r,Z as E,h as T,c as n,d,j as v,e as p,v as y,t as f,i as V,N as C}from"./app-BJSEvLr2.js";import{_ as N}from"./AdminLayoutSidebar-B_xNyK73.js";import{R as B}from"./RichTextEditor-DiIVMbJM.js";import"./DropdownLink-BKuK1C9h.js";import"./useTranslations-CytgtFYN.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const S={class:"bg-white rounded-lg shadow-md p-6",dir:"rtl"},j={key:0,class:"mt-1 text-sm text-red-600"},M={key:0,class:"mt-1 text-sm text-red-600"},z={key:0,class:"mt-1 text-sm text-red-600"},D={key:0,class:"p-4 bg-green-50 border border-green-200 rounded-lg"},R={class:"flex items-center justify-between pt-6 border-t border-gray-200"},U={class:"flex items-center space-x-3 space-x-reverse"},q=["disabled"],F={key:0},L={key:1},O=["disabled"],Z={key:0},$={key:1},P={__name:"Edit_Fixed",props:{terms:Object},setup(a){const i=a,l=x(!1),u=x(null),t=k({title:i.terms.title||"",content:"",version:i.terms.version||"1.0"}),_=()=>{if(u.value&&(t.content=u.value.getCurrentContent()),!t.content||t.content.trim()===""||t.content==="<p></p>"){t.setError("content","محتوى الاتفاقية مطلوب");return}t.put(route("admin.terms-of-service.update",i.terms.id),{onSuccess:()=>{},onError:c=>{console.error("Validation errors:",c)}})},h=()=>{l.value=!0,C.post(route("admin.terms-of-service.activate",i.terms.id),{},{onSuccess:()=>{l.value=!1},onError:()=>{l.value=!1}})};return(c,s)=>(o(),w(N,null,{default:g(()=>[b(r(E),{title:"تعديل اتفاقية الاستخدام"}),e("div",S,[s[8]||(s[8]=e("div",{class:"mb-6"},[e("h1",{class:"text-2xl font-bold text-gray-900 mb-2"},"تعديل اتفاقية الاستخدام"),e("p",{class:"text-gray-600"},"قم بتعديل محتوى اتفاقية الاستخدام مع دعم التنسيق الغني")],-1)),e("form",{onSubmit:T(_,["prevent"]),class:"space-y-6"},[e("div",null,[s[2]||(s[2]=e("label",{for:"title",class:"block text-sm font-medium text-gray-700 mb-2"},[p(" عنوان الاتفاقية "),e("span",{class:"text-red-500"},"*")],-1)),v(e("input",{type:"text",id:"title","onUpdate:modelValue":s[0]||(s[0]=m=>r(t).title=m),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"مثال: اتفاقية استخدام موقع سامقة للتصميم",required:""},null,512),[[y,r(t).title]]),r(t).errors.title?(o(),n("div",j,f(r(t).errors.title),1)):d("",!0)]),e("div",null,[s[3]||(s[3]=e("label",{for:"version",class:"block text-sm font-medium text-gray-700 mb-2"}," رقم الإصدار ",-1)),v(e("input",{type:"text",id:"version","onUpdate:modelValue":s[1]||(s[1]=m=>r(t).version=m),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"مثال: 1.0"},null,512),[[y,r(t).version]]),r(t).errors.version?(o(),n("div",M,f(r(t).errors.version),1)):d("",!0)]),e("div",null,[s[4]||(s[4]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[p(" محتوى الاتفاقية "),e("span",{class:"text-red-500"},"*")],-1)),b(B,{ref_key:"richTextEditor",ref:u,"initial-content":i.terms.content??"",placeholder:"اكتب محتوى اتفاقية الاستخدام هنا...",class:"min-h-[400px]"},null,8,["initial-content"]),r(t).errors.content?(o(),n("div",z,f(r(t).errors.content),1)):d("",!0),s[5]||(s[5]=e("p",{class:"mt-2 text-sm text-gray-500"}," يمكنك استخدام التنسيق الغني مثل النص العريض، المائل، القوائم والعناوين. يدعم النص العربي مع المحاذاة من اليمين لليسار. ",-1))]),a.terms.is_active?(o(),n("div",D,s[6]||(s[6]=[e("div",{class:"flex items-center"},[e("svg",{class:"h-5 w-5 text-green-600 ml-2",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})]),e("span",{class:"text-sm font-medium text-green-800"},"هذه الاتفاقية نشطة حالياً")],-1)]))):d("",!0),e("div",R,[e("div",U,[b(r(V),{href:c.route("admin.terms-of-service.index"),class:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-6 rounded-lg transition duration-200"},{default:g(()=>s[7]||(s[7]=[p(" إلغاء ")])),_:1,__:[7]},8,["href"]),e("button",{type:"submit",disabled:r(t).processing||!r(t).title,class:"bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-bold py-2 px-6 rounded-lg transition duration-200 disabled:cursor-not-allowed"},[r(t).processing?(o(),n("span",F,"جاري التحديث...")):(o(),n("span",L,"تحديث الاتفاقية"))],8,q)]),a.terms.is_active?d("",!0):(o(),n("button",{key:0,type:"button",onClick:h,disabled:l.value,class:"bg-green-600 hover:bg-green-700 disabled:bg-green-400 text-white font-bold py-2 px-6 rounded-lg transition duration-200 disabled:cursor-not-allowed"},[l.value?(o(),n("span",Z,"جاري التفعيل...")):(o(),n("span",$,"تفعيل الاتفاقية"))],8,O))])],32)])]),_:1}))}};export{P as default};
