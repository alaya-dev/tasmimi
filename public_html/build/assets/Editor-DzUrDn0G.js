import{r as x,p as W,c as i,o as r,a as N,b as e,u as l,Z,n as c,w as G,i as J,t as n,d as m,F as E,f as D,j as p,v as f,k as K,q as S,N as P,h as Q}from"./app-BJSEvLr2.js";import{u as ee}from"./useTranslations-CytgtFYN.js";const te=["dir"],se={class:"bg-white shadow-sm border-b border-gray-200"},le={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},oe={class:"flex items-center justify-between h-16"},ne={class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ae=["d"],ie={class:"text-xl font-semibold text-gray-900"},re={class:"text-sm text-gray-500"},de=["disabled"],ue={class:"flex h-screen"},ce={class:"w-80 bg-white shadow-lg border-r border-gray-200 overflow-y-auto"},ge={class:"p-6"},ve=["onClick"],xe={key:0,class:"space-y-6"},me={class:"block text-sm font-medium text-gray-700 mb-2"},pe={key:0},be={class:"text-sm font-medium text-gray-700 mb-3"},fe={class:"space-y-4"},ye={class:"block text-sm text-gray-600 mb-1"},he={class:"text-xs text-gray-500"},_e={class:"block text-sm text-gray-600 mb-1"},we={class:"block text-sm text-gray-600 mb-1"},ke={class:"block text-sm text-gray-600 mb-1"},Ce=["onClick"],Ee={key:1,class:"space-y-6"},Me={class:"block text-sm font-medium text-gray-700 mb-2"},Ae={class:"grid grid-cols-3 gap-2 mb-4"},De=["onClick"],Ue={key:2,class:"space-y-6"},Ve={class:"block text-sm font-medium text-gray-700 mb-2"},je={key:0},ze={class:"space-y-4"},Se={class:"text-xs text-gray-500"},Te={class:"text-xs text-gray-500"},Fe={class:"flex-1 flex items-center justify-center p-8"},Be={class:"bg-white rounded-lg shadow-lg overflow-hidden"},Le=["onClick","onMousedown"],Ne={key:0},$e=["src"],T=400,F=600,Xe={__name:"Editor",props:{template:Object,design:Object},setup(B){const M=B,{__:d,isRTL:y,direction:$}=ee(),h=x("text"),o=x(null),A=x(!1),_=x(""),U=x("#ffffff"),O=[{id:"text",name:"النص"},{id:"background",name:"الخلفية"},{id:"images",name:"الصور"}],V=[{id:1,value:"#ffffff"},{id:2,value:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"},{id:3,value:"linear-gradient(135deg, #f093fb 0%, #f5576c 100%)"},{id:4,value:"linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)"},{id:5,value:"linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)"},{id:6,value:"#000000"}],w=x(V[0]),k=x([]),R=()=>{if(!_.value.trim())return;const a={id:Date.now(),type:"text",content:_.value,x:50,y:50,fontSize:24,color:"#000000",fontFamily:"Cairo",textAlign:"right"};k.value.push(a),_.value="",j(a)},j=a=>{o.value=a},X=()=>{o.value=null},L=a=>{w.value=a},Y=a=>{const s=a.target.files[0];if(!s)return;const g=new FileReader;g.onload=b=>{const u={id:Date.now(),type:"image",src:b.target.result,x:50,y:50,width:150,height:150};k.value.push(u),j(u)},g.readAsDataURL(s)},q=(a,s)=>{const g=s.clientX-a.x,b=s.clientY-a.y,u=t=>{a.x=t.clientX-g,a.y=t.clientY-b},C=()=>{document.removeEventListener("mousemove",u),document.removeEventListener("mouseup",C)};document.addEventListener("mousemove",u),document.addEventListener("mouseup",C)},H=async()=>{var a;A.value=!0;try{const s={elements:k.value,background:w.value,canvas:{width:T,height:F}};await P.post(route("client.designs.store"),{name:((a=M.template)==null?void 0:a.name)||"تصميم جديد",data:s})}catch(s){console.error("Error saving design:",s)}finally{A.value=!1}},I=()=>{console.log("Download design")};return W(()=>{M.design&&(k.value=M.design.data.elements||[],w.value=M.design.data.background||V[0])}),(a,s)=>{var g,b,u,C;return r(),i(E,null,[N(l(Z),{title:l(d)("client.design_editor")},null,8,["title"]),e("div",{dir:l($),class:"min-h-screen bg-gray-100"},[e("header",se,[e("div",le,[e("div",oe,[e("div",{class:c(["flex items-center space-x-4",l(y)?"space-x-reverse":""])},[N(l(J),{href:a.route("client.templates"),class:"text-gray-600 hover:text-gray-900"},{default:G(()=>[(r(),i("svg",ne,[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:l(y)?"M9 5l7 7-7 7":"M15 19l-7-7 7-7"},null,8,ae)]))]),_:1},8,["href"]),e("h1",ie,n(l(d)("client.design_editor")),1),e("span",re,n(((g=B.template)==null?void 0:g.name)||"تصميم جديد"),1)],2),e("div",{class:c(["flex items-center space-x-4",l(y)?"space-x-reverse":""])},[e("button",{onClick:H,disabled:A.value,class:"bg-blue-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-blue-700 transition-colors disabled:opacity-50"},n(A.value?l(d)("common.saving"):l(d)("client.save_design")),9,de),e("button",{onClick:I,class:"bg-green-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-green-700 transition-colors"},n(l(d)("client.download_design")),1)],2)])])]),e("div",ue,[e("div",ce,[e("div",ge,[s[13]||(s[13]=e("h2",{class:"text-lg font-semibold text-gray-900 mb-6"},"أدوات التصميم",-1)),e("div",{class:c(["flex space-x-1 mb-6 bg-gray-100 rounded-lg p-1",l(y)?"space-x-reverse":""])},[(r(),i(E,null,D(O,t=>e("button",{key:t.id,onClick:v=>h.value=t.id,class:c([h.value===t.id?"bg-white text-blue-600 shadow-sm":"text-gray-600","flex-1 py-2 px-3 rounded-md text-sm font-medium transition-colors"])},n(t.name),11,ve)),64))],2),h.value==="text"?(r(),i("div",xe,[e("div",null,[e("label",me,n(l(d)("client.add_text")),1),p(e("input",{"onUpdate:modelValue":s[0]||(s[0]=t=>_.value=t),type:"text",placeholder:"اكتب النص هنا...",class:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[f,_.value]]),e("button",{onClick:R,class:"w-full mt-2 bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 transition-colors"}," إضافة النص ")]),((b=o.value)==null?void 0:b.type)==="text"?(r(),i("div",pe,[e("h3",be,n(l(d)("client.text_properties")),1),e("div",fe,[e("div",null,[e("label",ye,n(l(d)("client.font_size")),1),p(e("input",{"onUpdate:modelValue":s[1]||(s[1]=t=>o.value.fontSize=t),type:"range",min:"12",max:"72",class:"w-full"},null,512),[[f,o.value.fontSize]]),e("span",he,n(o.value.fontSize)+"px",1)]),e("div",null,[e("label",_e,n(l(d)("client.font_color")),1),p(e("input",{"onUpdate:modelValue":s[2]||(s[2]=t=>o.value.color=t),type:"color",class:"w-full h-10 border border-gray-300 rounded-lg"},null,512),[[f,o.value.color]])]),e("div",null,[e("label",we,n(l(d)("client.font_family")),1),p(e("select",{"onUpdate:modelValue":s[3]||(s[3]=t=>o.value.fontFamily=t),class:"w-full border border-gray-300 rounded-lg px-3 py-2"},s[8]||(s[8]=[e("option",{value:"Arial"},"Arial",-1),e("option",{value:"Cairo"},"Cairo",-1),e("option",{value:"Amiri"},"Amiri",-1),e("option",{value:"Tajawal"},"Tajawal",-1)]),512),[[K,o.value.fontFamily]])]),e("div",null,[e("label",ke,n(l(d)("client.text_align")),1),e("div",{class:c(["flex space-x-2",l(y)?"space-x-reverse":""])},[(r(),i(E,null,D(["left","center","right"],t=>e("button",{key:t,onClick:v=>o.value.textAlign=t,class:c([o.value.textAlign===t?"bg-blue-600 text-white":"bg-gray-200 text-gray-700","flex-1 py-2 rounded-lg text-sm transition-colors"])},n(t==="left"?"يسار":t==="center"?"وسط":"يمين"),11,Ce)),64))],2)])])])):m("",!0)])):m("",!0),h.value==="background"?(r(),i("div",Ee,[e("div",null,[e("label",Me,n(l(d)("client.change_background")),1),e("div",Ae,[(r(),i(E,null,D(V,t=>{var v;return e("div",{key:t.id,onClick:z=>L(t),class:c(["h-16 rounded-lg cursor-pointer border-2 hover:border-blue-500 transition-colors",((v=w.value)==null?void 0:v.id)===t.id?"border-blue-500":"border-gray-200"]),style:S({background:t.value})},null,14,De)}),64))]),e("div",null,[s[9]||(s[9]=e("label",{class:"block text-sm text-gray-600 mb-1"},"لون مخصص",-1)),p(e("input",{"onUpdate:modelValue":s[4]||(s[4]=t=>U.value=t),onChange:s[5]||(s[5]=t=>L({id:"custom",value:U.value})),type:"color",class:"w-full h-10 border border-gray-300 rounded-lg"},null,544),[[f,U.value]])])])])):m("",!0),h.value==="images"?(r(),i("div",Ue,[e("div",null,[e("label",Ve,n(l(d)("client.add_image")),1),e("input",{onChange:Y,type:"file",accept:"image/*",class:"w-full border border-gray-300 rounded-lg px-3 py-2"},null,32)]),((u=o.value)==null?void 0:u.type)==="image"?(r(),i("div",je,[s[12]||(s[12]=e("h3",{class:"text-sm font-medium text-gray-700 mb-3"},"خصائص الصورة",-1)),e("div",ze,[e("div",null,[s[10]||(s[10]=e("label",{class:"block text-sm text-gray-600 mb-1"},"العرض",-1)),p(e("input",{"onUpdate:modelValue":s[6]||(s[6]=t=>o.value.width=t),type:"range",min:"50",max:"400",class:"w-full"},null,512),[[f,o.value.width]]),e("span",Se,n(o.value.width)+"px",1)]),e("div",null,[s[11]||(s[11]=e("label",{class:"block text-sm text-gray-600 mb-1"},"الارتفاع",-1)),p(e("input",{"onUpdate:modelValue":s[7]||(s[7]=t=>o.value.height=t),type:"range",min:"50",max:"400",class:"w-full"},null,512),[[f,o.value.height]]),e("span",Te,n(o.value.height)+"px",1)])])])):m("",!0)])):m("",!0)])]),e("div",Fe,[e("div",Be,[e("div",{ref:"canvas",class:"relative bg-white border border-gray-300",style:S({width:T+"px",height:F+"px",background:((C=w.value)==null?void 0:C.value)||"#ffffff"}),onClick:X},[(r(!0),i(E,null,D(k.value,t=>{var v;return r(),i("div",{key:t.id,onClick:Q(z=>j(t),["stop"]),onMousedown:z=>q(t,z),class:c([((v=o.value)==null?void 0:v.id)===t.id?"ring-2 ring-blue-500":"","absolute cursor-move"]),style:S({left:t.x+"px",top:t.y+"px",fontSize:t.fontSize+"px",color:t.color,fontFamily:t.fontFamily,textAlign:t.textAlign,width:t.width+"px",height:t.height+"px"})},[t.type==="text"?(r(),i("span",Ne,n(t.content),1)):m("",!0),t.type==="image"?(r(),i("img",{key:1,src:t.src,class:"w-full h-full object-cover"},null,8,$e)):m("",!0)],46,Le)}),128))],4),e("div",{class:"bg-gray-50 px-4 py-2 text-sm text-gray-600 text-center"},n(T)+" × "+n(F)+" بكسل ")])])])],8,te)],64)}}};export{Xe as default};
