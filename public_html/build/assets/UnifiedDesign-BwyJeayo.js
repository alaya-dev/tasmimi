import{c as p,o as f,a as n,u as l,Z as u,w as i,b as t,t as x,i as v,e as y,F as h}from"./app-BJSEvLr2.js";import{_ as w}from"./AdminLayoutSidebar-B_xNyK73.js";import{U as _}from"./UnifiedDesignEditor-CkSjF2wg.js";import{_ as b}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./DropdownLink-BKuK1C9h.js";import"./useTranslations-CytgtFYN.js";import"./StableDesignEditor-qCEntoBL.js";import"./DesignElement-afgWAcdT.js";const U={class:"flex justify-between items-center flex-row-reverse"},k={class:"flex items-center flex-row-reverse"},S={class:"text-right"},D={class:"mt-1 text-sm text-gray-600"},A={__name:"UnifiedDesign",props:{template:{type:Object,required:!0}},setup(r){const a=r,d=async s=>{try{console.log("ðŸ”§ Admin UnifiedDesign: Received save event for template:",a.template.id),console.log("ðŸ”§ Admin UnifiedDesign: Save data:",s);const e=await fetch(route("admin.templates.design.save",a.template.id),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")},body:JSON.stringify({design_data:s.designDataString,canvas_size:s.canvasSize,design_notes:s.designNotes})});if(console.log("ðŸ”§ Admin UnifiedDesign: Response status:",e.status),e.ok){const o=await e.json();console.log("âœ… Admin UnifiedDesign: Design saved successfully",o),o.success&&alert("ØªÙ… Ø­ÙØ¸ Ø§Ù„ØªØµÙ…ÙŠÙ… Ø¨Ù†Ø¬Ø§Ø­")}else{const o=await e.json();throw console.error("âŒ Admin UnifiedDesign: Server error:",o),new Error(o.message||"Failed to save design")}}catch(e){console.error("âŒ Admin UnifiedDesign: Error saving design:",e),alert("Ø®Ø·Ø£ ÙÙŠ Ø­ÙØ¸ Ø§Ù„ØªØµÙ…ÙŠÙ…: "+e.message)}},c=s=>{console.log("ðŸ”§ Admin: Handling update:",s)},m=s=>{console.log("ðŸ”§ Admin: Handling export:",s)},g=()=>{window.history.back()};return(s,e)=>(f(),p(h,null,[n(l(u),{title:"Ù…Ø­Ø±Ø± Ø§Ù„ØªØµÙ…ÙŠÙ… - Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù‚ÙˆØ§Ù„Ø¨"}),n(w,null,{breadcrumb:i(()=>[n(l(v),{href:s.route("admin.templates.index"),class:"text-gray-500 hover:text-gray-700"},{default:i(()=>e[0]||(e[0]=[y(" Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù‚ÙˆØ§Ù„Ø¨ ")])),_:1,__:[0]},8,["href"]),e[1]||(e[1]=t("svg",{class:"w-5 h-5 text-gray-400 mx-2 rotate-180",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{"fill-rule":"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule":"evenodd"})],-1)),e[2]||(e[2]=t("span",{class:"text-gray-500"},"Ù…Ø­Ø±Ø± Ø§Ù„ØªØµÙ…ÙŠÙ…",-1))]),header:i(()=>[t("div",U,[t("div",k,[t("button",{onClick:g,class:"ml-4 text-gray-600 hover:text-gray-900 transition-colors duration-200"},e[3]||(e[3]=[t("svg",{class:"w-5 h-5 rotate-180",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])),t("div",S,[e[4]||(e[4]=t("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"},"Ù…Ø­Ø±Ø± Ø§Ù„ØªØµÙ…ÙŠÙ…",-1)),t("p",D,x(r.template.name),1)])])])]),default:i(()=>[n(_,{template:r.template,context:"admin",onSave:d,onUpdate:c,onExport:m},null,8,["template"])]),_:1})],64))}},z=b(A,[["__scopeId","data-v-bb4776e2"]]);export{z as default};
