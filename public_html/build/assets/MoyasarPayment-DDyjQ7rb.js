import{p as y,c as n,o as r,a as d,u as x,Z as f,w as g,b as e,t as l,d as p,F as m,f as b,e as v}from"./app-BJSEvLr2.js";import{_ as w}from"./ClientLayout-BKigkkjX.js";import"./DropdownLink-BKuK1C9h.js";import"./useTranslations-CytgtFYN.js";const h={class:"py-12",dir:"rtl"},_={class:"max-w-4xl mx-auto sm:px-6 lg:px-8"},M={class:"bg-white shadow-xl rounded-lg overflow-hidden"},B={class:"bg-gradient-to-r from-blue-600 to-purple-600 px-6 py-8 text-center"},C={class:"text-blue-100"},k={class:"p-6"},I={class:"grid grid-cols-1 lg:grid-cols-2 gap-8"},V={class:"order-2 lg:order-1"},j={class:"bg-gray-50 rounded-lg p-4 mb-6"},z={class:"flex justify-between items-center mb-2"},E={class:"font-medium"},D={class:"flex items-center space-x-2"},H={class:"font-bold"},L={class:"flex justify-between items-center text-sm text-gray-600 mb-2"},N={key:0,class:"mt-3"},P={class:"text-sm text-gray-600 space-y-1"},T={class:"flex justify-between items-center font-bold text-lg"},F={class:"flex items-center space-x-2"},Z={__name:"MoyasarPayment",props:{subscription:{type:Object,required:!0},paymentConfig:{type:Object,required:!0}},setup(o){const i=o,c=s=>s.duration_days?s.duration_days==7?"أسبوعي":s.duration_days==30?"شهري":s.duration_days==90?"ربع سنوي":s.duration_days==365?"سنوي":s.duration_days+" يوم":{weekly:"أسبوعي",monthly:"شهري",annual:"سنوي"}[s.type]||s.type,u=async s=>{try{await axios.post(route("client.payment.save-id",i.subscription.id),{payment_id:s.id}),console.log("Payment ID saved successfully:",s.id)}catch(t){console.error("Failed to save payment ID:",t)}};return y(()=>{if(typeof window.Moyasar<"u")try{console.log("Initializing Moyasar with config:",i.paymentConfig),window.Moyasar.init({element:"#mysr-form",...i.paymentConfig,on_completed:async function(s){console.log("Payment completed:",s),await u(s)}})}catch(s){console.error("Moyasar initialization error:",s);const t=document.getElementById("mysr-form");t&&(t.innerHTML=`
                    <div class="bg-red-50 border border-red-200 rounded-lg p-4 text-center">
                        <i class="fas fa-exclamation-triangle text-red-600 mb-2"></i>
                        <p class="text-red-800 font-medium">خطأ في تحميل نموذج الدفع</p>
                        <p class="text-red-600 text-sm">يرجى إعادة تحميل الصفحة والمحاولة مرة أخرى</p>
                        <button onclick="window.location.reload()" class="mt-3 bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700">
                            إعادة التحميل
                        </button>
                    </div>
                `)}else{console.error("Moyasar library not loaded");const s=document.getElementById("mysr-form");s&&(s.innerHTML=`
                <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4 text-center">
                    <i class="fas fa-exclamation-triangle text-yellow-600 mb-2"></i>
                    <p class="text-yellow-800 font-medium">جاري تحميل نموذج الدفع...</p>
                    <p class="text-yellow-600 text-sm">إذا لم يتم التحميل، يرجى التحقق من الاتصال بالإنترنت</p>
                </div>
            `)}}),(s,t)=>(r(),n(m,null,[d(x(f),{title:"الدفع "}),d(w,null,{default:g(()=>[e("div",h,[e("div",_,[e("div",M,[e("div",B,[t[0]||(t[0]=e("h1",{class:"text-3xl font-bold text-white mb-2"},"إتمام عملية الدفع",-1)),e("p",C,"اشتراك "+l(o.subscription.name),1)]),e("div",k,[e("div",I,[e("div",V,[t[9]||(t[9]=e("h2",{class:"text-xl font-semibold text-gray-900 mb-4"},"ملخص الطلب",-1)),e("div",j,[e("div",z,[e("span",E,l(o.subscription.name),1),e("div",D,[e("span",H,l(o.subscription.price),1),t[1]||(t[1]=e("img",{src:"/images/Saudi_Riyal.png",alt:"ريال سعودي",class:"w-5 h-5"},null,-1))])]),e("div",L,[t[2]||(t[2]=e("span",null,"المدة",-1)),e("span",null,l(c(o.subscription)),1)]),o.subscription.features&&o.subscription.features.length>0?(r(),n("div",N,[t[4]||(t[4]=e("p",{class:"text-sm font-medium text-gray-700 mb-2"},"الميزات المتضمنة:",-1)),e("ul",P,[(r(!0),n(m,null,b(o.subscription.features,a=>(r(),n("li",{key:a,class:"flex items-center"},[t[3]||(t[3]=e("svg",{class:"w-4 h-4 text-green-500 ml-2",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})],-1)),v(" "+l(a),1)]))),128))])])):p("",!0),t[8]||(t[8]=e("hr",{class:"my-4"},null,-1)),e("div",T,[t[7]||(t[7]=e("span",null,"المجموع",-1)),e("div",F,[e("span",null,l(o.subscription.price),1),t[5]||(t[5]=e("img",{src:"/images/Saudi_Riyal.png",alt:"ريال سعودي",class:"w-6 h-6"},null,-1)),t[6]||(t[6]=e("span",{class:"text-sm font-normal text-gray-600"},"ريال سعودي",-1))])])])]),t[10]||(t[10]=e("div",{class:"order-1 lg:order-2"},[e("h2",{class:"text-xl font-semibold text-gray-900 mb-4"},"معلومات الدفع"),e("div",{id:"mysr-form",class:"mb-6"}),e("div",{class:"mt-6 p-4 bg-green-50 border border-green-200 rounded-lg"},[e("div",{class:"flex items-center"},[e("svg",{class:"w-5 h-5 text-green-600 ml-2",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z","clip-rule":"evenodd"})]),e("div",null,[e("p",{class:"text-sm font-medium text-green-800"},"دفع آمن ومشفر"),e("p",{class:"text-sm text-green-600"},"معلوماتك محمية بأعلى معايير الأمان")])])])],-1))])])])])])]),_:1})],64))}};export{Z as default};
