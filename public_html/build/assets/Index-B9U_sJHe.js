import{T as f,g as v,o,w as c,a as p,b as e,u as r,Z as y,c as d,d as a,t as i,h as _,j as m,e as u,F as h,f as w,k,v as b,i as j}from"./app-BJSEvLr2.js";import{_ as V}from"./AdminLayoutSidebar-B_xNyK73.js";import{_ as z}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./DropdownLink-BKuK1C9h.js";import"./useTranslations-CytgtFYN.js";const B={class:"bg-white rounded-lg shadow-md p-6",dir:"rtl"},C={key:0,class:"mb-6 p-4 bg-green-50 border border-green-200 rounded-lg"},M={class:"flex items-center"},$={class:"text-sm font-medium text-green-800"},N={key:1,class:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg"},S={class:"flex items-center"},q={class:"text-sm font-medium text-red-800"},I=["value"],T={key:0,class:"mt-1 text-sm text-red-600"},U={key:0,class:"mt-1 text-sm text-red-600"},A={class:"mt-1 text-sm text-gray-500"},D={key:0,class:"mt-1 text-sm text-red-600"},E={class:"mt-1 text-sm text-gray-500"},F={class:"flex items-center justify-between pt-6 border-t border-gray-200"},L={class:"flex items-center space-x-3 space-x-reverse"},H=["disabled"],Z={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},G={key:1},J={key:2},K={__name:"Index",props:{clients:Array},setup(g){const t=f({client_id:"",subject:"",message:""}),x=()=>{t.post(route("admin.client-messaging.send"),{onSuccess:()=>{t.reset()},onError:n=>{console.error("Validation errors:",n)}})};return(n,s)=>(o(),v(V,null,{default:c(()=>[p(r(y),{title:"مراسلة العملاء"}),e("div",B,[s[11]||(s[11]=e("div",{class:"mb-6"},[e("h1",{class:"text-2xl font-bold text-gray-900 mb-2"},"مراسلة العملاء"),e("p",{class:"text-gray-600"},"إرسال رسائل إلكترونية مخصصة للعملاء")],-1)),n.$page.props.flash.success?(o(),d("div",C,[e("div",M,[s[3]||(s[3]=e("svg",{class:"h-5 w-5 text-green-600 ml-2",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})],-1)),e("span",$,i(n.$page.props.flash.success),1)])])):a("",!0),n.$page.props.flash.error?(o(),d("div",N,[e("div",S,[s[4]||(s[4]=e("svg",{class:"h-5 w-5 text-red-600 ml-2",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm-1-4a1 1 0 102 0v-4a1 1 0 10-2 0v4zm0-8a1 1 0 102 0 1 1 0 00-2 0z","clip-rule":"evenodd"})],-1)),e("span",q,i(n.$page.props.flash.error),1)])])):a("",!0),e("form",{onSubmit:_(x,["prevent"]),class:"space-y-6"},[e("div",null,[s[6]||(s[6]=e("label",{for:"client_id",class:"block text-sm font-medium text-gray-700 mb-2"},[u(" اختيار العميل "),e("span",{class:"text-red-500"},"*")],-1)),m(e("select",{id:"client_id","onUpdate:modelValue":s[0]||(s[0]=l=>r(t).client_id=l),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:""},[s[5]||(s[5]=e("option",{value:""},"اختر العميل...",-1)),(o(!0),d(h,null,w(g.clients,l=>(o(),d("option",{key:l.id,value:l.id},i(l.email)+" "+i(l.phone?"- "+l.phone:"- لا يوجد رقم هاتف"),9,I))),128))],512),[[k,r(t).client_id]]),r(t).errors.client_id?(o(),d("div",T,i(r(t).errors.client_id),1)):a("",!0)]),e("div",null,[s[7]||(s[7]=e("label",{for:"subject",class:"block text-sm font-medium text-gray-700 mb-2"},[u(" موضوع الرسالة "),e("span",{class:"text-red-500"},"*")],-1)),m(e("input",{type:"text",id:"subject","onUpdate:modelValue":s[1]||(s[1]=l=>r(t).subject=l),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"أدخل موضوع الرسالة...",maxlength:"255",required:""},null,512),[[b,r(t).subject]]),r(t).errors.subject?(o(),d("div",U,i(r(t).errors.subject),1)):a("",!0),e("p",A,i(r(t).subject.length)+"/255 حرف",1)]),e("div",null,[s[8]||(s[8]=e("label",{for:"message",class:"block text-sm font-medium text-gray-700 mb-2"},[u(" محتوى الرسالة "),e("span",{class:"text-red-500"},"*")],-1)),m(e("textarea",{id:"message","onUpdate:modelValue":s[2]||(s[2]=l=>r(t).message=l),rows:"8",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none",placeholder:"اكتب محتوى الرسالة هنا...",maxlength:"2000",required:"",style:{direction:"rtl","text-align":"right"}},null,512),[[b,r(t).message]]),r(t).errors.message?(o(),d("div",D,i(r(t).errors.message),1)):a("",!0),e("p",E,i(r(t).message.length)+"/2000 حرف",1)]),e("div",F,[e("div",L,[p(r(j),{href:n.route("admin.dashboard"),class:"bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-6 rounded-lg transition duration-200"},{default:c(()=>s[9]||(s[9]=[u(" إلغاء ")])),_:1,__:[9]},8,["href"]),e("button",{type:"submit",disabled:r(t).processing||!r(t).client_id||!r(t).subject||!r(t).message,class:"bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-bold py-2 px-6 rounded-lg transition duration-200 disabled:cursor-not-allowed flex items-center"},[r(t).processing?(o(),d("svg",Z,s[10]||(s[10]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):a("",!0),r(t).processing?(o(),d("span",G,"جاري الإرسال...")):(o(),d("span",J,"إرسال الرسالة"))],8,H)])])],32),s[12]||(s[12]=e("div",{class:"mt-8 p-4 bg-blue-50 border border-blue-200 rounded-lg"},[e("h4",{class:"font-medium text-blue-900 mb-2"},"تعليمات الاستخدام:"),e("ul",{class:"text-sm text-blue-800 space-y-1"},[e("li",null,"• اختر العميل المطلوب إرسال الرسالة إليه من القائمة"),e("li",null,"• أدخل موضوع واضح ومفهوم للرسالة"),e("li",null,"• اكتب محتوى الرسالة بشكل مهذب ومفصل"),e("li",null,"• تأكد من مراجعة المعاينة قبل الإرسال"),e("li",null,"• سيتم إرسال الرسالة إلى البريد الإلكتروني المسجل للعميل")])],-1))])]),_:1}))}},X=z(K,[["__scopeId","data-v-04411c07"]]);export{X as default};
