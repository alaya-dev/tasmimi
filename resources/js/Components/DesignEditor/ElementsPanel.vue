<template>
    <div class="elements-panel h-full flex flex-col bg-white">
        <!-- Header -->
        <div class="flex-shrink-0 p-4 border-b border-gray-200">
            <h3 class="text-lg font-semibold text-gray-800">ÿßŸÑÿπŸÜÿßÿµÿ±</h3>
        </div>

        <!-- Background Image Upload -->
        <div class="p-4 border-b border-gray-100 flex flex-col gap-2">
            <input ref="backgroundInput" type="file" accept="image/*" @change="handleBackgroundSelect" class="hidden" />
            <button @click="$refs.backgroundInput.click()" class="w-full bg-gradient-to-r from-blue-600 to-indigo-600 text-white px-4 py-3 rounded-lg hover:from-blue-700 hover:to-indigo-700 flex items-center justify-center space-x-2 space-x-reverse font-medium shadow-lg">
                <i class="fas fa-image"></i>
                <span>ÿ•ÿ∂ÿßŸÅÿ© ÿÆŸÑŸÅŸäÿ© ŸÑŸÑÿµŸÅÿ≠ÿ©</span>
            </button>
        </div>

        <!-- Content -->
        <div class="flex-1 overflow-y-auto p-4">
            <!-- Basic Elements -->
            <div class="mb-6">
                <h4 class="font-semibold text-gray-700 mb-3">ÿßŸÑÿπŸÜÿßÿµÿ± ÿßŸÑÿ£ÿ≥ÿßÿ≥Ÿäÿ©</h4>
                <div class="grid grid-cols-2 gap-3">
                    <button
                        @click="addElement('text')"
                        class="p-4 bg-blue-50 hover:bg-blue-100 rounded-lg border border-blue-200 transition-colors group"
                    >
                        <i class="fas fa-font text-2xl text-blue-600 mb-2 group-hover:scale-110 transition-transform"></i>
                        <div class="text-sm font-medium text-blue-800">ŸÜÿµ</div>
                    </button>

                    <button
                        @click="$refs.imageInput.click()"
                        class="p-4 bg-green-50 hover:bg-green-100 rounded-lg border border-green-200 transition-colors group"
                    >
                        <i class="fas fa-image text-2xl text-green-600 mb-2 group-hover:scale-110 transition-transform"></i>
                        <div class="text-sm font-medium text-green-800">ÿµŸàÿ±ÿ©</div>
                    </button>
                    <input ref="imageInput" type="file" accept="image/*" @change="handleImageSelect" class="hidden" />

                    <button
                        @click="addElement('rectangle')"
                        class="p-4 bg-purple-50 hover:bg-purple-100 rounded-lg border border-purple-200 transition-colors group"
                    >
                        <i class="fas fa-square text-2xl text-purple-600 mb-2 group-hover:scale-110 transition-transform"></i>
                        <div class="text-sm font-medium text-purple-800">ŸÖÿ≥ÿ™ÿ∑ŸäŸÑ</div>
                    </button>

                    <button
                        @click="addElement('circle')"
                        class="p-4 bg-orange-50 hover:bg-orange-100 rounded-lg border border-orange-200 transition-colors group"
                    >
                        <i class="fas fa-circle text-2xl text-orange-600 mb-2 group-hover:scale-110 transition-transform"></i>
                        <div class="text-sm font-medium text-orange-800">ÿØÿßÿ¶ÿ±ÿ©</div>
                    </button>

                    <button
                        @click="addElement('line')"
                        class="p-4 bg-gray-50 hover:bg-gray-100 rounded-lg border border-gray-200 transition-colors group"
                    >
                        <i class="fas fa-minus text-2xl text-gray-600 mb-2 group-hover:scale-110 transition-transform"></i>
                        <div class="text-sm font-medium text-gray-800">ÿÆÿ∑</div>
                    </button>
                </div>
            </div>

            <!-- Shapes -->
            <div class="mb-6">
                <h4 class="font-semibold text-gray-700 mb-3">ÿßŸÑÿ£ÿ¥ŸÉÿßŸÑ</h4>
                <div class="grid grid-cols-3 gap-2">
                    <button
                        v-for="shape in shapes"
                        :key="shape.type"
                        @click="addShape(shape)"
                        class="p-3 bg-gray-50 hover:bg-gray-100 rounded-lg border border-gray-200 transition-colors group"
                        :title="shape.name"
                    >
                        <i :class="shape.icon" class="text-lg text-gray-600 group-hover:scale-110 transition-transform"></i>
                    </button>
                </div>
            </div>

            <!-- Icons -->
            <div class="mb-6">
                <h4 class="font-semibold text-gray-700 mb-3">ÿßŸÑÿ£ŸäŸÇŸàŸÜÿßÿ™</h4>
                <div class="grid grid-cols-4 gap-2">
                    <button
                        v-for="icon in icons"
                        :key="icon.class"
                        @click="addIcon(icon)"
                        class="p-3 bg-gray-50 hover:bg-gray-100 rounded-lg border border-gray-200 transition-colors group"
                        :title="icon.name"
                    >
                        <span class="text-lg text-gray-600 group-hover:scale-110 transition-transform block">{{ icon.symbol }}</span>
                    </button>
                </div>
            </div>


        </div>
    </div>
</template>

<script setup>
import { ref, computed } from 'vue'

// Emits
const emit = defineEmits(['add-element', 'add-background', 'add-image'])

// State

// Data
const shapes = [
    { type: 'triangle', name: 'ŸÖÿ´ŸÑÿ´', icon: 'fas fa-play fa-rotate-90' },
    { type: 'diamond', name: 'ŸÖÿπŸäŸÜ', icon: 'fas fa-diamond' },
    { type: 'star', name: 'ŸÜÿ¨ŸÖÿ©', icon: 'fas fa-star' },
    { type: 'arrow', name: 'ÿ≥ŸáŸÖ', icon: 'fas fa-arrow-right' },
  //  { type: 'polygon', name: 'ŸÖÿ∂ŸÑÿπ', icon: 'fas fa-draw-polygon' }
]

const icons = [
    // Basic & Communication
    { symbol: 'üè†', class: 'fas fa-home', name: 'ŸÖŸÜÿ≤ŸÑ' },
    { symbol: 'üë§', class: 'fas fa-user', name: 'ŸÖÿ≥ÿ™ÿÆÿØŸÖ' },
    { symbol: '‚úâ', class: 'fas fa-envelope', name: 'ÿ®ÿ±ŸäÿØ' },
    { symbol: 'üìû', class: 'fas fa-phone', name: 'Ÿáÿßÿ™ŸÅ' },
    { symbol: 'üí¨', class: 'fas fa-message', name: 'ÿ±ÿ≥ÿßŸÑÿ©' },
    { symbol: 'üë•', class: 'fas fa-users', name: 'ŸÖÿ≥ÿ™ÿÆÿØŸÖŸàŸÜ' },

    // Time & Location
    { symbol: 'üìÖ', class: 'fas fa-calendar', name: 'ÿ™ŸÇŸàŸäŸÖ' },
    { symbol: 'üïê', class: 'fas fa-clock', name: 'ÿ≥ÿßÿπÿ©' },
    { symbol: 'üìç', class: 'fas fa-location-dot', name: 'ŸÖŸàŸÇÿπ' },

    // Media & Entertainment
    { symbol: 'üì∑', class: 'fas fa-camera', name: 'ŸÉÿßŸÖŸäÿ±ÿß' },
    { symbol: 'üéµ', class: 'fas fa-music', name: 'ŸÖŸàÿ≥ŸäŸÇŸâ' },
    { symbol: 'üé•', class: 'fas fa-video', name: 'ŸÅŸäÿØŸäŸà' },
    { symbol: 'üñº', class: 'fas fa-image', name: 'ÿµŸàÿ±ÿ©' },
    { symbol: '‚ñ∂', class: 'fas fa-play', name: 'ÿ™ÿ¥ÿ∫ŸäŸÑ' },

    // Shopping & Business
    { symbol: 'üõí', class: 'fas fa-shopping-cart', name: 'ÿ≥ŸÑÿ©' },
    { symbol: 'üéÅ', class: 'fas fa-gift', name: 'ŸáÿØŸäÿ©' },
    { symbol: 'üí∞', class: 'fas fa-money', name: 'ŸÖÿßŸÑ' },
    { symbol: 'üè™', class: 'fas fa-store', name: 'ŸÖÿ™ÿ¨ÿ±' },

    // Transport
    { symbol: 'üöó', class: 'fas fa-car', name: 'ÿ≥Ÿäÿßÿ±ÿ©' },
    { symbol: '‚úà', class: 'fas fa-plane', name: 'ÿ∑ÿßÿ¶ÿ±ÿ©' },
    { symbol: 'üö≤', class: 'fas fa-bicycle', name: 'ÿØÿ±ÿßÿ¨ÿ©' },
    { symbol: 'üöÇ', class: 'fas fa-train', name: 'ŸÇÿ∑ÿßÿ±' },

    // Education & Achievement
    { symbol: 'üéì', class: 'fas fa-graduation-cap', name: 'ÿ™ÿÆÿ±ÿ¨' },
    { symbol: 'üèÜ', class: 'fas fa-trophy', name: 'ŸÉÿ£ÿ≥' },
    { symbol: 'üìö', class: 'fas fa-book', name: 'ŸÉÿ™ÿßÿ®' },
    { symbol: '‚úè', class: 'fas fa-pencil', name: 'ŸÇŸÑŸÖ' },

    // Emotions & Symbols
    { symbol: '‚ù§', class: 'fas fa-heart', name: 'ŸÇŸÑÿ®' },
    { symbol: '‚òÖ', class: 'fas fa-star', name: 'ŸÜÿ¨ŸÖÿ©' },
    { symbol: 'üòä', class: 'fas fa-smile', name: 'ÿßÿ®ÿ™ÿ≥ÿßŸÖÿ©' },
    { symbol: 'üëç', class: 'fas fa-thumbs-up', name: 'ÿ•ÿπÿ¨ÿßÿ®' },

    // Actions & Tools
    { symbol: '‚öô', class: 'fas fa-cog', name: 'ÿ•ÿπÿØÿßÿØÿßÿ™' },
    { symbol: 'üîç', class: 'fas fa-search', name: 'ÿ®ÿ≠ÿ´' },
    { symbol: '‚úì', class: 'fas fa-check', name: 'ÿµÿ≠' },
    { symbol: '‚úï', class: 'fas fa-times', name: 'ÿÆÿ∑ÿ£' },
    { symbol: 'üíæ', class: 'fas fa-save', name: 'ÿ≠ŸÅÿ∏' },
    { symbol: 'üóë', class: 'fas fa-trash', name: 'ÿ≠ÿ∞ŸÅ' },

    // Weather & Nature
    { symbol: '‚òÄ', class: 'fas fa-sun', name: 'ÿ¥ŸÖÿ≥' },
    { symbol: 'üåô', class: 'fas fa-moon', name: 'ŸÇŸÖÿ±' },
    { symbol: '‚òÅ', class: 'fas fa-cloud', name: 'ÿ≥ÿ≠ÿßÿ®ÿ©' },
    { symbol: 'üåß', class: 'fas fa-rain', name: 'ŸÖÿ∑ÿ±' },

    // Food & Drink
    { symbol: '‚òï', class: 'fas fa-coffee', name: 'ŸÇŸáŸàÿ©' },
    { symbol: 'üçé', class: 'fas fa-apple', name: 'ÿ™ŸÅÿßÿ≠ÿ©' },
    { symbol: 'üéÇ', class: 'fas fa-cake', name: 'ŸÉÿπŸÉÿ©' },
    { symbol: 'üçï', class: 'fas fa-pizza', name: 'ÿ®Ÿäÿ™ÿ≤ÿß' },

    // Security & Info
    { symbol: 'üîí', class: 'fas fa-lock', name: 'ŸÇŸÅŸÑ' },
    { symbol: 'üîë', class: 'fas fa-key', name: 'ŸÖŸÅÿ™ÿßÿ≠' },
    { symbol: '‚Ñπ', class: 'fas fa-info', name: 'ŸÖÿπŸÑŸàŸÖÿßÿ™' },
    { symbol: '‚ö†', class: 'fas fa-warning', name: 'ÿ™ÿ≠ÿ∞Ÿäÿ±' },
    { symbol: 'üí°', class: 'fas fa-lightbulb', name: 'ŸÅŸÉÿ±ÿ©' }
]














// Methods
const addElement = (type) => {
    const elementData = getElementData(type)
    emit('add-element', elementData)
}

const addShape = (shape) => {
    const elementData = {
        type: 'shape',
        name: shape.name,
        width: 100,
        height: 100,
        properties: {
            shapeType: shape.type,
            backgroundColor: '#8b5cf6',
            borderColor: '#7c3aed',
            borderWidth: 2
        }
    }
    emit('add-element', elementData)
}

const addIcon = (icon) => {
    const elementData = {
        type: 'icon',
        name: icon.name,
        width: 50,
        height: 50,
        properties: {
            icon: icon.symbol,
            iconClass: icon.class, // Keep for backward compatibility
            color: '#374151',
            fontSize: 24
        }
    }
    emit('add-element', elementData)
}



const getElementData = (type) => {
    switch (type) {
        case 'text':
            return {
                type: 'text',
                name: 'ŸÜÿµ',
                width: 200,
                height: 50,
                properties: {
                    text: 'ÿßŸÉÿ™ÿ® ÿßŸÑŸÜÿµ ŸáŸÜÿß',
                    fontSize: 16,
                    fontFamily: 'Cairo',
                    fontWeight: 'normal',
                    color: '#374151',
                    textAlign: 'right',
                    lineHeight: 1.5
                }
            }

        case 'image':
            return {
                type: 'image',
                name: 'ÿµŸàÿ±ÿ©',
                width: 300,
                height: 200,
                properties: {
                    src: '/images/placeholder.png',
                    objectFit: 'cover',
                    borderRadius: 0
                }
            }

        case 'rectangle':
            return {
                type: 'rectangle',
                name: 'ŸÖÿ≥ÿ™ÿ∑ŸäŸÑ',
                width: 200,
                height: 100,
                properties: {
                    backgroundColor: '#8b5cf6',
                    borderColor: '#7c3aed',
                    borderWidth: 0,
                    borderRadius: 8
                }
            }

        case 'circle':
            return {
                type: 'circle',
                name: 'ÿØÿßÿ¶ÿ±ÿ©',
                width: 100,
                height: 100,
                properties: {
                    backgroundColor: '#10b981',
                    borderColor: '#059669',
                    borderWidth: 0
                }
            }

        case 'line':
            return {
                type: 'line',
                name: 'ÿÆÿ∑',
                width: 200,
                height: 2,
                properties: {
                    backgroundColor: '#6b7280',
                    borderRadius: 0
                }
            }

        default:
            return {
                type: 'rectangle',
                name: 'ÿπŸÜÿµÿ±',
                width: 100,
                height: 100,
                properties: {}
            }
    }
}

function handleBackgroundSelect(e) {
    const file = e.target.files[0]
    if (file) {
        const reader = new FileReader()
        reader.onload = (event) => {
            emit('add-background', event.target.result)
        }
        reader.readAsDataURL(file)
    }
    e.target.value = ''
}
function handleImageSelect(e) {
    const file = e.target.files[0]
    if (file) {
        const reader = new FileReader()
        reader.onload = (event) => {
            emit('add-image', event.target.result)
        }
        reader.readAsDataURL(file)
    }
    e.target.value = ''
}
</script>

<style scoped>
.elements-panel {
    direction: rtl;
}
</style>
